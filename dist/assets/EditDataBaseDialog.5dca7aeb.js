import{u as y,R as b,a as w,r as m,m as f,I as D,P as v,j as P,E as G,b as c,T as z,c as Y,d as W,e as Ct,s as tt,f as St,g as ft,h as _t,i as xt,k as wt,l as j,n as Nt,C as Z,o as Ot,p as Bt,q as mt,t as U,v as ht,A as $,M as et,D as ut,w as Lt,x as H,S as Pt,y as Tt,z as Ut,W as k,B as st,F as gt,G as Mt,H as at,J as vt,K as bt,L as Wt,N as $t,O as Ft,Q as Ht,U as Vt,V as Xt,X as Gt,Y as zt,Z as Yt,_ as kt}from"./index.ff456544.js";function Jt(){var R,_,N;const{permissions:T}=y(W),e=T.get(b.SPECIFICATION),r=y(Ct),n=y(tt),d=w(St),[i,h]=m.exports.useState([...n.keys()][0]),S=[{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u0415\u0434",sorted:!0},{caption:"\u041A\u043E\u044D\u0444-\u0442",sorted:!0}],g=[];n.forEach((A,O)=>g.push({key:O,data:[A.code,A.name,r.get(A.units),`${A.coef}`]}));const C=[{title:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:((R=n.get(i))==null?void 0:R.name)||"",message:f.ENTER_CAPTION,inputType:D.TEXT},{title:"\u041A\u043E\u044D\u0444-\u0442:",value:((_=n.get(i))==null?void 0:_.coef)||0,message:f.ENTER_COEF,inputType:D.TEXT,propertyType:v.POSITIVE_NUMBER},{title:"\u041A\u043E\u0434:",value:((N=n.get(i))==null?void 0:N.code)||"",message:f.ENTER_CODE,inputType:D.TEXT}];return P(G,{children:[c(z,{header:S,content:g,onSelectRow:A=>h(A)}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?c(Y,{items:C,onUpdate:async(A,O)=>{const{units:x,charType:L,...l}=n.get(i);return A[0]&&(l.name=O[0]),A[1]&&(l.coef=+O[1]),A[2]&&(l.code=O[2]),await d({id:i,units:x,charType:L,...l})}}):c("div",{})]})}function Kt(){var O,x,L,l;const{permissions:T}=y(W),e=T.get(b.MATERIALS_DB),r=w(_t),n=w(xt),d=w(wt),i=y(j),h=y(Nt),S=m.exports.useMemo(()=>[...i.keys()][0]||0,[i]),[g,C]=m.exports.useState(S),R=ft(g),_=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u0422\u0438\u043F",sorted:!0}],N=[];i.forEach((s,I)=>N.push({key:I,data:[s.name,s.code,h.get(s.char_type_id)]}));const A=[{title:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:((O=i.get(g))==null?void 0:O.name)||"",message:f.ENTER_CAPTION,inputType:D.TEXT},{title:"\u041A\u043E\u0434:",value:((x=i.get(g))==null?void 0:x.code)||"",message:f.ENTER_CODE,inputType:D.TEXT},{title:"\u0422\u0438\u043F:",value:((L=i.get(g))==null?void 0:L.char_type_id)||0,displayValue:s=>h.get(s)||"",list:[...h.keys()],inputType:D.LIST,message:""},{title:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",value:R||"",message:f.ENTER_IMAGE,inputType:D.FILE}];return P(G,{children:[c("div",{children:c(z,{header:_,content:N,onSelectRow:s=>{C(s)}})}),e!=null&&e.Read?c(Y,{name:(l=i.get(g))==null?void 0:l.name,items:A,onUpdate:e!=null&&e.Update?async(s,I)=>{const B=s[0]?I[0]:"",o=s[1]?I[1]:"",t=s[2]?I[2]:0,u=s[3]?I[3]:"";return await r({id:g,char_type_id:t,name:B,code:o,image:u})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const s=await d(g);return C([...i.keys()][0]||0),s}:void 0,onAdd:e!=null&&e.Create?async(s,I)=>{const B=s[0]?I[0]:"",o=s[1]?I[1]:"",t=s[2]?I[2]:0,u=s[3]?I[3]:"";return await n({name:B,char_type_id:t,code:o,image:u})}:void 0}):c("div",{})]})}function Qt(){var I,B;const{permissions:T}=y(W),e=w(Ot),r=w(Bt),n=T.get(b.MATERIALS_DB),d=y(tt),i=y(j),h=y(mt),S=m.exports.useMemo(()=>[...d.keys()][0]||0,[d]),[g,C]=m.exports.useState(S),R=m.exports.useMemo(()=>h.filter(o=>o.id===g),[h,g]),_=m.exports.useMemo(()=>R.filter(o=>o.id===g).map(o=>o.charId),[R,g]),N=[...i.keys()].filter(o=>{var t,u;return((t=i.get(o))==null?void 0:t.char_type_id)===((u=d.get(g))==null?void 0:u.charType)}),A=m.exports.useMemo(()=>_[0]||0,[_]),[O,x]=m.exports.useState(A),L=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0}],l=[];_.forEach(o=>{var t,u;return l.push({key:o,data:[(t=i.get(o))==null?void 0:t.name,(u=i.get(o))==null?void 0:u.code]})});const s=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:O,displayValue:o=>{var t;return((t=i.get(o))==null?void 0:t.name)||""},list:N,message:f.ENTER_CAPTION,inputType:D.LIST}];return m.exports.useEffect(()=>{x(_[0]||0)},[_]),P(G,{children:[P("div",{children:[c("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:c(Z,{title:"\u041D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440\u0430: ",value:g,items:[...d.keys()],displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},onChange:o=>{C(o)}})}),c("hr",{}),l.length>0&&c(z,{header:L,content:l,onSelectRow:o=>{x(o)}})]}),n!=null&&n.Read?c(Y,{name:((I=d.get(g))==null?void 0:I.name)+""+((B=i.get(O))==null?void 0:B.name),items:s,onDelete:n!=null&&n.Delete?async()=>{const o=await r({id:g,charId:O});return x(_[0]||0),o}:void 0,onAdd:n!=null&&n.Create?async(o,t)=>{const u=t[0];return R.find(M=>M.charId===u)?{success:!1,message:f.MATERIAL_EXIST}:await e({id:g,charId:u})}:void 0}):c("div",{})]})}const It=U(new Map),nt=U(null,async(T,e)=>{var n;const{permissions:r}=T(W);if(!((n=r.get(b.MATERIALS))!=null&&n.Read))return{success:!1,message:""};try{const d=await ht(`${$}${et}${ut}`);d.success&&e(It,Lt(d.data))}catch(d){console.error(d)}}),Zt=U(null,async(T,e,r)=>{var d;const{permissions:n}=T(W);if(!((d=n.get(b.MATERIALS))!=null&&d.Delete))return{success:!1,message:""};try{const i=await H(`${$}${et}${ut}`,"DELETE",JSON.stringify({id:r}));return await e(nt),{success:i.success,message:i.message}}catch(i){return console.error(i),{success:!1,message:f.QUERY_ERROR}}}),jt=U(null,async(T,e,r)=>{var d;const{permissions:n}=T(W);if(!((d=n.get(b.MATERIALS))!=null&&d.Create))return{success:!1,message:""};try{const i=await H(`${$}${et}${ut}`,"POST",JSON.stringify({data:r}));return await e(nt),{success:i.success,message:i.message}}catch(i){return console.error(i),{success:!1,message:f.QUERY_ERROR}}}),qt=U(null,async(T,e,r)=>{var d;const{permissions:n}=T(W);if(!((d=n.get(b.MATERIALS))!=null&&d.Update))return{success:!1,message:""};try{const i=await H(`${$}${et}${ut}`,"PUT",JSON.stringify({data:r}));return await e(nt),{success:i.success,message:i.message}}catch(i){return console.error(i),{success:!1,message:f.QUERY_ERROR}}});function te(){var B;const{permissions:T}=y(W),e=w(nt),r=T.get(b.MATERIALS),n=y(It),d=y(j),i=y(Ut),S=y(mt).filter(o=>o.id===Pt.DSP16).map(o=>o.charId),g=i.filter(o=>o.char_type_id===Tt.COLOR).map(o=>o.id),C=()=>n.keys().next().value||0,[R,_]=m.exports.useState(C()),{kromkaId:N,zaglushkaId:A}=n.get(R)||{kromkaId:0,zaglushkaId:0},O=w(Zt),x=w(jt),L=w(qt),l=[{caption:"\u0414\u0421\u041F",sorted:!0},{caption:"\u041A\u0440\u043E\u043C\u043A\u0430",sorted:!0},{caption:"\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430",sorted:!0}],s=[];n.forEach((o,t)=>{var u,p,M;return s.push({key:t,data:[(u=d.get(t))==null?void 0:u.name,(p=d.get(o.kromkaId))==null?void 0:p.name,(M=d.get(o.zaglushkaId))==null?void 0:M.name]})});const I=[{title:"\u0414\u0421\u041F:",value:R,displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},message:f.ENTER_CAPTION,inputType:D.LIST,list:S},{title:"\u041A\u0440\u043E\u043C\u043A\u0430:",value:N,displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},message:f.ENTER_CODE,inputType:D.LIST,list:g},{title:"\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430:",value:A,displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},message:f.ENTER_CODE,inputType:D.LIST,list:g}];return m.exports.useEffect(()=>{e()},[r==null?void 0:r.Read]),P(G,{children:[c(z,{header:l,content:s,onSelectRow:o=>{_(o)}}),r!=null&&r.Read?c(Y,{name:(B=d.get(R))==null?void 0:B.name,items:I,onUpdate:r!=null&&r.Update?async(o,t)=>{const u=o[1]?t[1]:0,p=o[2]?t[2]:0;return await L({id:R,kromkaId:u,zaglushkaId:p})}:void 0,onAdd:r!=null&&r.Create?async(o,t)=>{const u=t[0],p=t[1],M=t[2];return await x({id:u,kromkaId:p,zaglushkaId:M})}:void 0,onDelete:r!=null&&r.Delete?async()=>{const o=await O(R);return _(C()),o}:void 0}):c("div",{})]})}const yt=U([]),ot=U(null,async(T,e)=>{try{const r=await ht(`${$}${k}${st}`);e(yt,r.data)}catch(r){console.error(r)}}),ee=U(null,async(T,e,r)=>{try{const n=await H(`${$}${k}${st}`,"POST",JSON.stringify({...r}));return e(ot),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:f.QUERY_ERROR}}}),ue=U(null,async(T,e,r)=>{try{const n=await H(`${$}${k}${st}`,"PUT",JSON.stringify({...r}));return e(ot),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:f.QUERY_ERROR}}}),se=U(null,async(T,e,r)=>{try{const n=await H(`${$}${k}${st}`,"DELETE",JSON.stringify({id:r}));return e(ot),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:f.QUERY_ERROR}}});function At(){return P("div",{className:"p-3",children:[c("strong",{children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435:"}),c("div",{children:"W - \u0448\u0438\u0440\u0438\u043D\u0430 \u0448\u043A\u0430\u0444\u0430"}),c("div",{children:"D - \u0433\u043B\u0443\u0431\u0438\u043D\u0430 \u0448\u043A\u0430\u0444\u0430"}),c("div",{children:"H - \u0432\u044B\u0441\u043E\u0442\u0430 \u0448\u043A\u0430\u0444\u0430"}),c("div",{children:"OFFSET - \u043E\u0442\u0441\u0442\u0443\u043F \u0432\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0435\u0433\u043E \u043D\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F"})]})}function ae(){return{detailId:0,length:"",width:"",count:0,id:0,maxHeight:0,maxWidth:0,minHeight:0,minWidth:0,wardrobeId:0}}function ne(){var t;const{permissions:T}=y(W),e=T.get(b.MATERIALS_DB),r=w(ot),n=w(ue),d=w(ee),i=w(se),h=y(gt),S=y(Mt),[g,C]=m.exports.useState([...h.keys()][0]),R=y(yt),_=m.exports.useMemo(()=>R.filter(u=>u.wardrobeId===g),[R,g]),N=[...new Set(_.map(u=>u.detailId))],[A,O]=m.exports.useState(0),x=m.exports.useMemo(()=>_.filter(u=>!A||u.detailId===A),[_,A]),[L,l]=m.exports.useState(((t=x.at(0))==null?void 0:t.id)||0),s=x.find(u=>u.id===L)||ae(),I=[{caption:"\u0414\u0435\u0442\u0430\u043B\u044C",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E",sorted:!0},{caption:"\u041A\u043E\u043B-\u0432\u043E",sorted:!0},{caption:"\u0414\u043B\u0438\u043D\u0430",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430",sorted:!0}],B=x.map(u=>({key:u.id,data:[S.get(u.detailId)||"",u.minWidth,u.maxWidth,u.minHeight,u.maxHeight,u.count,u.length,u.width]})),o=[{title:"\u0414\u0435\u0442\u0430\u043B\u044C:",value:s.detailId,displayValue:u=>S.get(u)||"",message:f.ENTER_CAPTION,inputType:D.LIST,list:[...S.keys()],listWithEmptyRow:!0},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442:",value:s.minWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E:",value:s.maxWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442:",value:s.minHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E:",value:s.maxHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u041A\u043E\u043B-\u0432\u043E:",value:s.count,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0414\u043B\u0438\u043D\u0430:",value:s.length,inputType:D.TEXT},{title:"\u0428\u0438\u0440\u0438\u043D\u0430:",value:s.width,inputType:D.TEXT}];return m.exports.useEffect(()=>{r()},[]),P(G,{children:[P("div",{children:[c(Z,{value:g,displayValue:u=>h.get(u),items:[...h.keys()],onChange:u=>C(u)}),c("hr",{}),c(Z,{value:A,displayValue:u=>S.get(u),items:N,onChange:u=>O(u),withEmpty:!0}),c("hr",{}),c(z,{header:I,content:B,onSelectRow:u=>{l(u)}})]}),P("div",{children:[e!=null&&e.Read?c(Y,{name:S.get(s==null?void 0:s.detailId),items:o,onUpdate:e!=null&&e.Update?async(u,p)=>{const M=u[0]?p[0]:s.detailId,X=u[1]?+p[1]:s.minWidth,Q=u[2]?+p[2]:s.maxWidth,a=u[3]?+p[3]:s.minHeight,E=u[4]?+p[4]:s.maxHeight,F=u[5]?+p[5]:s.count,J=u[6]?p[6]:s.length,K=u[7]?p[7]:s.width;return await n({id:s.id,wardrobeId:s.wardrobeId,detailId:M,maxWidth:Q,minWidth:X,minHeight:a,maxHeight:E,count:F,length:J,width:K})}:void 0,onDelete:e!=null&&e.Delete?async()=>{var p;const u=await i(s.id);return l(((p=x.at(0))==null?void 0:p.id)||0),u}:void 0,onAdd:e!=null&&e.Create?async(u,p)=>{const M=u[0]?p[0]:s.detailId,X=u[1]?+p[1]:s.minWidth,Q=u[2]?+p[2]:s.maxWidth,a=u[3]?+p[3]:s.minHeight,E=u[4]?+p[4]:s.maxHeight,F=u[5]?+p[5]:s.count,J=u[6]?p[6]:s.length,K=u[7]?p[7]:s.width;return await d({wardrobeId:g,detailId:M,maxWidth:Q,minWidth:X,minHeight:a,maxHeight:E,count:F,length:J,width:K})}:void 0}):c("div",{}),c(At,{})]})]})}const Dt=U([]),rt=U(null,async(T,e)=>{try{const r=await ht(`${$}${k}${at}`);e(Dt,r.data)}catch(r){console.error(r)}}),oe=U(null,async(T,e,r)=>{try{const n=await H(`${$}${k}${at}`,"POST",JSON.stringify({...r}));return e(rt),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:f.QUERY_ERROR}}}),re=U(null,async(T,e,r)=>{try{const n=await H(`${$}${k}${at}`,"PUT",JSON.stringify({...r}));return e(rt),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:f.QUERY_ERROR}}}),ie=U(null,async(T,e,r)=>{try{const n=await H(`${$}${k}${at}`,"DELETE",JSON.stringify({id:r}));return e(rt),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:f.QUERY_ERROR}}});function ce(){return{charId:0,count:0,id:0,maxDepth:0,maxHeight:0,maxWidth:0,minDepth:0,minHeight:0,minWidth:0,size:"",specId:0,wardrobeId:0}}function de(){var Q;const{permissions:T}=y(W),e=T.get(b.MATERIALS_DB),r=w(rt),n=w(re),d=w(oe),i=w(ie),h=y(gt),S=y(tt),g=y(mt),C=y(j),[R,_]=m.exports.useState([...h.keys()][0]),N=y(Dt),A=m.exports.useMemo(()=>N.filter(a=>a.wardrobeId===R),[N,R]),O=[...new Set(A.map(a=>a.specId))],[x,L]=m.exports.useState(0),[l,s]=m.exports.useState(0),I=m.exports.useMemo(()=>A.filter(a=>!x||a.specId===x),[A,x]),[B,o]=m.exports.useState(I[0]&&I[0].id),t=I.find(a=>a.id===B)||ce(),u=m.exports.useMemo(()=>g.filter(a=>l?a.id===l:a.id===(t==null?void 0:t.specId)).map(a=>a.charId),[g,l,t==null?void 0:t.specId]),p=[{caption:"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E",sorted:!0},{caption:"\u041A\u043E\u043B-\u0432\u043E",sorted:!0},{caption:"\u0420\u0430\u0437\u043C\u0435\u0440",sorted:!0},{caption:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430",sorted:!0}],M=I.map(a=>{var E,F;return{key:a.id,data:[((E=S.get(a.specId))==null?void 0:E.name)||"",a.minWidth,a.maxWidth,a.minDepth,a.maxDepth,a.minHeight,a.maxHeight,a.count,a.size,((F=C.get(a.charId))==null?void 0:F.name)||""]}}),X=[{title:"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430:",value:t.specId,displayValue:a=>{var E;return((E=S.get(a))==null?void 0:E.name)||""},message:f.ENTER_CAPTION,inputType:D.LIST,list:[...S.keys()],listWithEmptyRow:!0,onChange:a=>s(a)},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442:",value:t.minWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E:",value:t.maxWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u043E\u0442:",value:t.minDepth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u0434\u043E:",value:t.maxDepth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442:",value:t.minHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E:",value:t.maxHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u041A\u043E\u043B-\u0432\u043E:",value:t.count,inputType:D.TEXT,propertyType:v.POSITIVE_NUMBER},{title:"\u0420\u0430\u0437\u043C\u0435\u0440:",value:t.size,inputType:D.TEXT,optional:!0},{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:(t==null?void 0:t.charId)||0,displayValue:a=>{var E;return((E=C.get(a))==null?void 0:E.name)||""},message:f.ENTER_CAPTION,inputType:D.LIST,list:u,listWithEmptyRow:!0,optional:!0}];return m.exports.useEffect(()=>{r()},[]),m.exports.useEffect(()=>{var a;o(((a=I.at(-1))==null?void 0:a.id)||0),s(0)},[N]),m.exports.useEffect(()=>{var a;o(((a=I.at(0))==null?void 0:a.id)||0),L(0),s(0)},[R]),P(G,{children:[P("div",{children:[c(Z,{value:R,displayValue:a=>h.get(a),items:[...h.keys()],onChange:a=>_(a)}),c("hr",{}),c(Z,{value:x,displayValue:a=>{var E;return(E=S.get(a))==null?void 0:E.name},items:O,onChange:a=>L(a),withEmpty:!0}),c("hr",{}),c(z,{header:p,content:M,onSelectRow:a=>{o(a)}})]}),P("div",{children:[e!=null&&e.Read?c(Y,{name:((Q=S.get(t.specId))==null?void 0:Q.name)||"",items:X,onUpdate:e!=null&&e.Update?async(a,E)=>{const F=a[0]?E[0]:t.specId,J=a[1]?+E[1]:t.minWidth,K=a[2]?+E[2]:t.maxWidth,q=a[3]?+E[3]:t.minDepth,it=a[4]?+E[4]:t.maxDepth,ct=a[5]?+E[5]:t.minHeight,dt=a[6]?+E[6]:t.maxHeight,lt=a[7]?+E[7]:t.count,pt=a[8]?E[8]:t.size,Et=a[9]?+E[9]:t.charId;return await n({id:t.id,wardrobeId:R,specId:F,maxWidth:K,minWidth:J,maxDepth:it,minDepth:q,minHeight:ct,maxHeight:dt,count:lt,size:pt,charId:Et})}:void 0,onDelete:e!=null&&e.Delete?async()=>{var E;const a=await i(t.id);return o(((E=I.at(0))==null?void 0:E.id)||0),a}:void 0,onAdd:e!=null&&e.Create?async(a,E)=>{const F=a[0]?E[0]:t.specId,J=a[1]?+E[1]:t.minWidth,K=a[2]?+E[2]:t.maxWidth,q=a[3]?+E[3]:t.minDepth,it=a[4]?+E[4]:t.maxDepth,ct=a[5]?+E[5]:t.minHeight,dt=a[6]?+E[6]:t.maxHeight,lt=a[7]?+E[7]:t.count,pt=a[8]?E[8]:t.size,Et=a[9]?+E[9]:t.charId;return await d({wardrobeId:R,specId:F,maxWidth:K,minWidth:J,maxDepth:it,minDepth:q,minHeight:ct,maxHeight:dt,count:lt,size:pt,charId:Et})}:void 0}):c("div",{}),c(At,{})]})]})}function le(){var B,o;const{permissions:T}=y(W),e=w(vt);w(bt);const r=w(Wt),n=y($t),d=y(Ft),i=T.get(b.MATERIALS_DB),h=y(j),S=y(tt),g=m.exports.useMemo(()=>[...d.keys()][0]||0,[d]),[C,R]=m.exports.useState(g),_=m.exports.useMemo(()=>n.filter(t=>t.id===C),[n,C]),N=m.exports.useMemo(()=>_.filter(t=>t.id===C).map(t=>t.charId),[_,C]),A=[...h.keys()].filter(t=>{var u,p;return((u=h.get(t))==null?void 0:u.char_type_id)===((p=S.get(C))==null?void 0:p.charType)}),O=m.exports.useMemo(()=>N[0]||0,[N]),[x,L]=m.exports.useState(O),l=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0}],s=[];N.forEach(t=>{var u,p;return s.push({key:t,data:[(u=h.get(t))==null?void 0:u.name,(p=h.get(t))==null?void 0:p.code]})});const I=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:x,displayValue:t=>{var u;return((u=h.get(t))==null?void 0:u.name)||""},list:A,message:f.ENTER_CAPTION,inputType:D.LIST}];return m.exports.useEffect(()=>{R(g)},[d]),P(G,{children:[P("div",{children:[c("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:c(Z,{title:"\u0422\u0438\u043F \u0444\u0430\u0441\u0430\u0434\u0430: ",value:C,items:[...d.keys()],displayValue:t=>d.get(t)||"",onChange:t=>{R(t)}})}),c("hr",{}),s.length>0&&c(z,{header:l,content:s,onSelectRow:t=>{L(t)}})]}),(i==null?void 0:i.Read)&&s.length>0?c(Y,{name:((B=S.get(C))==null?void 0:B.name)+""+((o=h.get(x))==null?void 0:o.name),items:I,onDelete:i!=null&&i.Delete?async()=>{const t=await r({id:C,charId:x});return L(N[0]||0),t}:void 0,onAdd:i!=null&&i.Create?async(t,u)=>{const p=u[0];return _.find(X=>X.charId===p)?{success:!1,message:f.MATERIAL_EXIST}:await e({id:C,charId:p})}:void 0}):c("div",{})]})}function pe(){var x,L;const{permissions:T}=y(W),e=w(Vt),r=w(Xt),n=w(Gt),d=y(zt),i=y(Yt),h=T.get(b.MATERIALS_DB),S=y(j),g=[...S.keys()].filter(l=>{var s;return((s=S.get(l))==null?void 0:s.char_type_id)===Tt.COLOR}),[C,R]=m.exports.useState(d[0].charId),_=((x=d.find(l=>l.charId===C))==null?void 0:x.purposeId)||Ht.BOTH,N=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",sorted:!0}],A=[];d.forEach(l=>{var s,I;return A.push({key:l.charId,data:[(s=S.get(l.charId))==null?void 0:s.name,(I=S.get(l.charId))==null?void 0:I.code,i.get(l.purposeId)]})});const O=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:C,displayValue:l=>{var s;return((s=S.get(l))==null?void 0:s.name)||""},list:g,message:f.ENTER_CAPTION,inputType:D.LIST},{title:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435:",value:_,displayValue:l=>i.get(l)||"",list:[...i.keys()],message:f.ENTER_CAPTION,inputType:D.LIST}];return m.exports.useEffect(()=>{R(d[0].charId)},[d]),P(G,{children:[c("div",{children:A.length>0&&c(z,{header:N,content:A,onSelectRow:l=>{R(l)}})}),(h==null?void 0:h.Read)&&A.length>0?c(Y,{name:(L=S.get(C))==null?void 0:L.name,items:O,onDelete:h!=null&&h.Delete?async()=>{const l=await n(C);return R(0),l}:void 0,onAdd:h!=null&&h.Create?async(l,s)=>{const I=s[0],B=s[1];return d.find(t=>t.charId===I)?{success:!1,message:f.MATERIAL_EXIST}:await e({charId:I,purposeId:B})}:void 0,onUpdate:h!=null&&h.Update?async(l,s)=>{const I=s[0],B=s[1];return await r({charId:C,purposeId:_},{charId:I,purposeId:B})}:void 0}):c("div",{})]})}const V=new Map;V.set(1,"\u041D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440\u0430");V.set(2,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438");V.set(3,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438 \u043D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440");V.set(4,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438 \u0444\u0430\u0441\u0430\u0434\u043E\u0432");V.set(5,"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A");V.set(6,"\u0414\u0421\u041F - \u041A\u0440\u043E\u043C\u043A\u0430 - \u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430");V.set(7,"\u0414\u0435\u0442\u0430\u043B\u0438\u0440\u043E\u0432\u043A\u0438");V.set(8,"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430");function he(){const[T,e]=m.exports.useState(1),r=[...V.entries()].map((d,i)=>c("div",{className:T===d[0]?"tab-button-active":"tab-button-inactive",onClick:()=>{e(d[0])},role:"button",children:d[1]},i)),n=Ee(T);return P("div",{className:"database-edit-container",children:[c("div",{className:"tab-header-container",children:r}),n]})}function Ee(T){const e=new Map;return e.set(1,c(Jt,{})),e.set(2,c(Kt,{})),e.set(3,c(Qt,{})),e.set(6,c(te,{})),e.set(7,c(ne,{})),e.set(8,c(de,{})),e.set(4,c(le,{})),e.set(5,c(pe,{})),e.get(T)||c(kt,{})}export{he as default};

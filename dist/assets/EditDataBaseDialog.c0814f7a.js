import{u as y,R as b,a as _,r as E,b as Ct,m as S,I as D,j as L,E as Y,c as i,T as J,d as Q,e as W,f as ft,g as St,h as xt,i as j,k as _t,C as Z,l as wt,n as Nt,s as Et,o as mt,p as M,q as ht,A as $,M as tt,D as et,t as Ot,v as F,S as Bt,w as Tt,x as Pt,W as G,y as ut,P as v,z as gt,B as Lt,F as st,G as Mt,H as Ut,J as vt,K as bt,L as Wt,N as $t,O as Ht,Q as Ft,U as Vt,V as Xt,X as Gt,Y as zt,Z as kt}from"./index.b7d8f67d.js";import Yt from"./EditSpecificationDialog.fc4c1790.js";function Jt(){var P,f,B,h;const{permissions:I}=y(W),e=I.get(b.MATERIALS_DB),r=_(ft),n=_(St),d=_(xt),c=y(j),m=y(_t),A=E.exports.useMemo(()=>[...c.keys()][0]||0,[c]),[g,R]=E.exports.useState(A),C=Ct(g),x=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u0422\u0438\u043F",sorted:!0}],O=[];c.forEach((s,T)=>O.push({key:T,data:[s.name,s.code,m.get(s.char_type_id)]}));const w=[{title:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:((P=c.get(g))==null?void 0:P.name)||"",message:S.ENTER_CAPTION,inputType:D.TEXT},{title:"\u041A\u043E\u0434:",value:((f=c.get(g))==null?void 0:f.code)||"",message:S.ENTER_CODE,inputType:D.TEXT},{title:"\u0422\u0438\u043F:",value:((B=c.get(g))==null?void 0:B.char_type_id)||0,displayValue:s=>m.get(s)||"",list:[...m.keys()],inputType:D.LIST,message:""},{title:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",value:C||"",message:S.ENTER_IMAGE,inputType:D.FILE}];return L(Y,{children:[i("div",{children:i(J,{header:x,content:O,onSelectRow:s=>{R(s)}})}),e!=null&&e.Read?i(Q,{name:(h=c.get(g))==null?void 0:h.name,items:w,onUpdate:e!=null&&e.Update?async(s,T)=>{const N=s[0]?T[0]:"",o=s[1]?T[1]:"",t=s[2]?T[2]:0,u=s[3]?T[3]:"";return await r({id:g,char_type_id:t,name:N,code:o,image:u})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const s=await d(g);return R([...c.keys()][0]||0),s}:void 0,onAdd:e!=null&&e.Create?async(s,T)=>{const N=s[0]?T[0]:"",o=s[1]?T[1]:"",t=s[2]?T[2]:0,u=s[3]?T[3]:"";return await n({name:N,char_type_id:t,code:o,image:u})}:void 0}):i("div",{})]})}function Qt(){var T,N;const{permissions:I}=y(W),e=_(wt),r=_(Nt),n=I.get(b.MATERIALS_DB),d=y(Et),c=y(j),m=y(mt),A=E.exports.useMemo(()=>[...d.keys()][0]||0,[d]),[g,R]=E.exports.useState(A),C=E.exports.useMemo(()=>m.filter(o=>o.id===g),[m,g]),x=E.exports.useMemo(()=>C.filter(o=>o.id===g).map(o=>o.charId),[C,g]),O=[...c.keys()].filter(o=>{var t,u;return((t=c.get(o))==null?void 0:t.char_type_id)===((u=d.get(g))==null?void 0:u.charType)}),w=E.exports.useMemo(()=>x[0]||0,[x]),[P,f]=E.exports.useState(w),B=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0}],h=[];x.forEach(o=>{var t,u;return h.push({key:o,data:[(t=c.get(o))==null?void 0:t.name,(u=c.get(o))==null?void 0:u.code]})});const s=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:P,displayValue:o=>{var t;return((t=c.get(o))==null?void 0:t.name)||""},list:O,message:S.ENTER_CAPTION,inputType:D.LIST}];return E.exports.useEffect(()=>{f(x[0]||0)},[x]),L(Y,{children:[L("div",{children:[i("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:i(Z,{title:"\u041D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440\u0430: ",value:g,items:[...d.keys()],displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},onChange:o=>{R(o)}})}),i("hr",{}),h.length>0&&i(J,{header:B,content:h,onSelectRow:o=>{f(o)}})]}),n!=null&&n.Read?i(Q,{name:((T=d.get(g))==null?void 0:T.name)+""+((N=c.get(P))==null?void 0:N.name),items:s,onDelete:n!=null&&n.Delete?async()=>{const o=await r({id:g,charId:P});return f(x[0]||0),o}:void 0,onAdd:n!=null&&n.Create?async(o,t)=>{const u=t[0];return C.find(U=>U.charId===u)?{success:!1,message:S.MATERIAL_EXIST}:await e({id:g,charId:u})}:void 0}):i("div",{})]})}const It=M(new Map),at=M(null,async(I,e)=>{var n;const{permissions:r}=I(W);if(!((n=r.get(b.MATERIALS))!=null&&n.Read))return{success:!1,message:""};try{const d=await ht(`${$}${tt}${et}`);d.success&&e(It,Ot(d.data))}catch(d){console.error(d)}}),Kt=M(null,async(I,e,r)=>{var d;const{permissions:n}=I(W);if(!((d=n.get(b.MATERIALS))!=null&&d.Delete))return{success:!1,message:""};try{const c=await F(`${$}${tt}${et}`,"DELETE",JSON.stringify({id:r}));return await e(at),{success:c.success,message:c.message}}catch(c){return console.error(c),{success:!1,message:S.QUERY_ERROR}}}),Zt=M(null,async(I,e,r)=>{var d;const{permissions:n}=I(W);if(!((d=n.get(b.MATERIALS))!=null&&d.Create))return{success:!1,message:""};try{const c=await F(`${$}${tt}${et}`,"POST",JSON.stringify({data:r}));return await e(at),{success:c.success,message:c.message}}catch(c){return console.error(c),{success:!1,message:S.QUERY_ERROR}}}),jt=M(null,async(I,e,r)=>{var d;const{permissions:n}=I(W);if(!((d=n.get(b.MATERIALS))!=null&&d.Update))return{success:!1,message:""};try{const c=await F(`${$}${tt}${et}`,"PUT",JSON.stringify({data:r}));return await e(at),{success:c.success,message:c.message}}catch(c){return console.error(c),{success:!1,message:S.QUERY_ERROR}}});function qt(){var N;const{permissions:I}=y(W),e=_(at),r=I.get(b.MATERIALS),n=y(It),d=y(j),c=y(Pt),A=y(mt).filter(o=>o.id===Bt.DSP16).map(o=>o.charId),g=c.filter(o=>o.char_type_id===Tt.COLOR).map(o=>o.id),R=()=>n.keys().next().value||0,[C,x]=E.exports.useState(R()),{kromkaId:O,zaglushkaId:w}=n.get(C)||{kromkaId:0,zaglushkaId:0},P=_(Kt),f=_(Zt),B=_(jt),h=[{caption:"\u0414\u0421\u041F",sorted:!0},{caption:"\u041A\u0440\u043E\u043C\u043A\u0430",sorted:!0},{caption:"\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430",sorted:!0}],s=[];n.forEach((o,t)=>{var u,l,U;return s.push({key:t,data:[(u=d.get(t))==null?void 0:u.name,(l=d.get(o.kromkaId))==null?void 0:l.name,(U=d.get(o.zaglushkaId))==null?void 0:U.name]})});const T=[{title:"\u0414\u0421\u041F:",value:C,displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},message:S.ENTER_CAPTION,inputType:D.LIST,list:A},{title:"\u041A\u0440\u043E\u043C\u043A\u0430:",value:O,displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},message:S.ENTER_CODE,inputType:D.LIST,list:g},{title:"\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430:",value:w,displayValue:o=>{var t;return((t=d.get(o))==null?void 0:t.name)||""},message:S.ENTER_CODE,inputType:D.LIST,list:g}];return E.exports.useEffect(()=>{e()},[r==null?void 0:r.Read]),L(Y,{children:[i(J,{header:h,content:s,onSelectRow:o=>{x(o)}}),r!=null&&r.Read?i(Q,{name:(N=d.get(C))==null?void 0:N.name,items:T,onUpdate:r!=null&&r.Update?async(o,t)=>{const u=o[1]?t[1]:0,l=o[2]?t[2]:0;return await B({id:C,kromkaId:u,zaglushkaId:l})}:void 0,onAdd:r!=null&&r.Create?async(o,t)=>{const u=t[0],l=t[1],U=t[2];return await f({id:u,kromkaId:l,zaglushkaId:U})}:void 0,onDelete:r!=null&&r.Delete?async()=>{const o=await P(C);return x(R()),o}:void 0}):i("div",{})]})}const yt=M([]),nt=M(null,async(I,e)=>{try{const r=await ht(`${$}${G}${ut}`);e(yt,r.data)}catch(r){console.error(r)}}),te=M(null,async(I,e,r)=>{try{const n=await F(`${$}${G}${ut}`,"POST",JSON.stringify({...r}));return e(nt),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:S.QUERY_ERROR}}}),ee=M(null,async(I,e,r)=>{try{const n=await F(`${$}${G}${ut}`,"PUT",JSON.stringify({...r}));return e(nt),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:S.QUERY_ERROR}}}),ue=M(null,async(I,e,r)=>{try{const n=await F(`${$}${G}${ut}`,"DELETE",JSON.stringify({id:r}));return e(nt),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:S.QUERY_ERROR}}});function At(){return L("div",{className:"p-3",children:[i("strong",{children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435:"}),i("div",{children:"W - \u0448\u0438\u0440\u0438\u043D\u0430 \u0448\u043A\u0430\u0444\u0430"}),i("div",{children:"D - \u0433\u043B\u0443\u0431\u0438\u043D\u0430 \u0448\u043A\u0430\u0444\u0430"}),i("div",{children:"H - \u0432\u044B\u0441\u043E\u0442\u0430 \u0448\u043A\u0430\u0444\u0430"}),i("div",{children:"OFFSET - \u043E\u0442\u0441\u0442\u0443\u043F \u0432\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0435\u0433\u043E \u043D\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F"})]})}function se(){return{detailId:0,length:"",width:"",count:0,id:0,maxHeight:0,maxWidth:0,minHeight:0,minWidth:0,wardrobeId:0}}function ae(){var t;const{permissions:I}=y(W),e=I.get(b.MATERIALS_DB),r=_(nt),n=_(ee),d=_(te),c=_(ue),m=y(gt),A=y(Lt),[g,R]=E.exports.useState([...m.keys()][0]),C=y(yt),x=E.exports.useMemo(()=>C.filter(u=>u.wardrobeId===g),[C,g]),O=[...new Set(x.map(u=>u.detailId))],[w,P]=E.exports.useState(0),f=E.exports.useMemo(()=>x.filter(u=>!w||u.detailId===w),[x,w]),[B,h]=E.exports.useState(((t=f.at(0))==null?void 0:t.id)||0),s=f.find(u=>u.id===B)||se(),T=[{caption:"\u0414\u0435\u0442\u0430\u043B\u044C",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E",sorted:!0},{caption:"\u041A\u043E\u043B-\u0432\u043E",sorted:!0},{caption:"\u0414\u043B\u0438\u043D\u0430",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430",sorted:!0}],N=f.map(u=>({key:u.id,data:[A.get(u.detailId)||"",u.minWidth,u.maxWidth,u.minHeight,u.maxHeight,u.count,u.length,u.width]})),o=[{title:"\u0414\u0435\u0442\u0430\u043B\u044C:",value:s.detailId,displayValue:u=>A.get(u)||"",message:S.ENTER_CAPTION,inputType:D.LIST,list:[...A.keys()],listWithEmptyRow:!0},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442:",value:s.minWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E:",value:s.maxWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442:",value:s.minHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E:",value:s.maxHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u041A\u043E\u043B-\u0432\u043E:",value:s.count,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0414\u043B\u0438\u043D\u0430:",value:s.length,inputType:D.TEXT},{title:"\u0428\u0438\u0440\u0438\u043D\u0430:",value:s.width,inputType:D.TEXT}];return E.exports.useEffect(()=>{r()},[]),L(Y,{children:[L("div",{children:[i(Z,{value:g,displayValue:u=>m.get(u),items:[...m.keys()],onChange:u=>R(u)}),i("hr",{}),i(Z,{value:w,displayValue:u=>A.get(u),items:O,onChange:u=>P(u),withEmpty:!0}),i("hr",{}),i(J,{header:T,content:N,onSelectRow:u=>{h(u)}})]}),L("div",{children:[e!=null&&e.Read?i(Q,{name:A.get(s==null?void 0:s.detailId),items:o,onUpdate:e!=null&&e.Update?async(u,l)=>{const U=u[0]?l[0]:s.detailId,X=u[1]?+l[1]:s.minWidth,K=u[2]?+l[2]:s.maxWidth,a=u[3]?+l[3]:s.minHeight,p=u[4]?+l[4]:s.maxHeight,H=u[5]?+l[5]:s.count,z=u[6]?l[6]:s.length,k=u[7]?l[7]:s.width;return await n({id:s.id,wardrobeId:s.wardrobeId,detailId:U,maxWidth:K,minWidth:X,minHeight:a,maxHeight:p,count:H,length:z,width:k})}:void 0,onDelete:e!=null&&e.Delete?async()=>{var l;const u=await c(s.id);return h(((l=f.at(0))==null?void 0:l.id)||0),u}:void 0,onAdd:e!=null&&e.Create?async(u,l)=>{const U=u[0]?l[0]:s.detailId,X=u[1]?+l[1]:s.minWidth,K=u[2]?+l[2]:s.maxWidth,a=u[3]?+l[3]:s.minHeight,p=u[4]?+l[4]:s.maxHeight,H=u[5]?+l[5]:s.count,z=u[6]?l[6]:s.length,k=u[7]?l[7]:s.width;return await d({wardrobeId:g,detailId:U,maxWidth:K,minWidth:X,minHeight:a,maxHeight:p,count:H,length:z,width:k})}:void 0}):i("div",{}),i(At,{})]})]})}const Dt=M([]),ot=M(null,async(I,e)=>{try{const r=await ht(`${$}${G}${st}`);e(Dt,r.data)}catch(r){console.error(r)}}),ne=M(null,async(I,e,r)=>{try{const n=await F(`${$}${G}${st}`,"POST",JSON.stringify({...r}));return e(ot),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:S.QUERY_ERROR}}}),oe=M(null,async(I,e,r)=>{try{const n=await F(`${$}${G}${st}`,"PUT",JSON.stringify({...r}));return e(ot),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:S.QUERY_ERROR}}}),re=M(null,async(I,e,r)=>{try{const n=await F(`${$}${G}${st}`,"DELETE",JSON.stringify({id:r}));return e(ot),{success:n.success,message:n.message}}catch(n){return console.error(n),{success:!1,message:S.QUERY_ERROR}}});function ie(){return{charId:0,count:0,id:0,maxDepth:0,maxHeight:0,maxWidth:0,minDepth:0,minHeight:0,minWidth:0,size:"",specId:0,wardrobeId:0}}function ce(){var K;const{permissions:I}=y(W),e=I.get(b.MATERIALS_DB),r=_(ot),n=_(oe),d=_(ne),c=_(re),m=y(gt),A=y(Et),g=y(mt),R=y(j),[C,x]=E.exports.useState([...m.keys()][0]),O=y(Dt),w=E.exports.useMemo(()=>O.filter(a=>a.wardrobeId===C),[O,C]),P=[...new Set(w.map(a=>a.specId))],[f,B]=E.exports.useState(0),[h,s]=E.exports.useState(0),T=E.exports.useMemo(()=>w.filter(a=>!f||a.specId===f),[w,f]),[N,o]=E.exports.useState(T[0]&&T[0].id),t=T.find(a=>a.id===N)||ie(),u=E.exports.useMemo(()=>g.filter(a=>h?a.id===h:a.id===(t==null?void 0:t.specId)).map(a=>a.charId),[g,h,t==null?void 0:t.specId]),l=[{caption:"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E",sorted:!0},{caption:"\u041A\u043E\u043B-\u0432\u043E",sorted:!0},{caption:"\u0420\u0430\u0437\u043C\u0435\u0440",sorted:!0},{caption:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430",sorted:!0}],U=T.map(a=>{var p,H;return{key:a.id,data:[((p=A.get(a.specId))==null?void 0:p.name)||"",a.minWidth,a.maxWidth,a.minDepth,a.maxDepth,a.minHeight,a.maxHeight,a.count,a.size,((H=R.get(a.charId))==null?void 0:H.name)||""]}}),X=[{title:"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430:",value:t.specId,displayValue:a=>{var p;return((p=A.get(a))==null?void 0:p.name)||""},message:S.ENTER_CAPTION,inputType:D.LIST,list:[...A.keys()],listWithEmptyRow:!0,onChange:a=>s(a)},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442:",value:t.minWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E:",value:t.maxWidth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u043E\u0442:",value:t.minDepth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u0434\u043E:",value:t.maxDepth,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442:",value:t.minHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E:",value:t.maxHeight,inputType:D.TEXT,propertyType:v.INTEGER_POSITIVE_NUMBER},{title:"\u041A\u043E\u043B-\u0432\u043E:",value:t.count,inputType:D.TEXT,propertyType:v.POSITIVE_NUMBER},{title:"\u0420\u0430\u0437\u043C\u0435\u0440:",value:t.size,inputType:D.TEXT,optional:!0},{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:(t==null?void 0:t.charId)||0,displayValue:a=>{var p;return((p=R.get(a))==null?void 0:p.name)||""},message:S.ENTER_CAPTION,inputType:D.LIST,list:u,listWithEmptyRow:!0,optional:!0}];return E.exports.useEffect(()=>{r()},[]),E.exports.useEffect(()=>{var a;o(((a=T.at(-1))==null?void 0:a.id)||0),s(0)},[O]),E.exports.useEffect(()=>{var a;o(((a=T.at(0))==null?void 0:a.id)||0),B(0),s(0)},[C]),L(Y,{children:[L("div",{children:[i(Z,{value:C,displayValue:a=>m.get(a),items:[...m.keys()],onChange:a=>x(a)}),i("hr",{}),i(Z,{value:f,displayValue:a=>{var p;return(p=A.get(a))==null?void 0:p.name},items:P,onChange:a=>B(a),withEmpty:!0}),i("hr",{}),i(J,{header:l,content:U,onSelectRow:a=>{o(a)}})]}),L("div",{children:[e!=null&&e.Read?i(Q,{name:((K=A.get(t.specId))==null?void 0:K.name)||"",items:X,onUpdate:e!=null&&e.Update?async(a,p)=>{const H=a[0]?p[0]:t.specId,z=a[1]?+p[1]:t.minWidth,k=a[2]?+p[2]:t.maxWidth,q=a[3]?+p[3]:t.minDepth,rt=a[4]?+p[4]:t.maxDepth,it=a[5]?+p[5]:t.minHeight,ct=a[6]?+p[6]:t.maxHeight,dt=a[7]?+p[7]:t.count,lt=a[8]?p[8]:t.size,pt=a[9]?+p[9]:t.charId;return await n({id:t.id,wardrobeId:C,specId:H,maxWidth:k,minWidth:z,maxDepth:rt,minDepth:q,minHeight:it,maxHeight:ct,count:dt,size:lt,charId:pt})}:void 0,onDelete:e!=null&&e.Delete?async()=>{var p;const a=await c(t.id);return o(((p=T.at(0))==null?void 0:p.id)||0),a}:void 0,onAdd:e!=null&&e.Create?async(a,p)=>{const H=a[0]?p[0]:t.specId,z=a[1]?+p[1]:t.minWidth,k=a[2]?+p[2]:t.maxWidth,q=a[3]?+p[3]:t.minDepth,rt=a[4]?+p[4]:t.maxDepth,it=a[5]?+p[5]:t.minHeight,ct=a[6]?+p[6]:t.maxHeight,dt=a[7]?+p[7]:t.count,lt=a[8]?p[8]:t.size,pt=a[9]?+p[9]:t.charId;return await d({wardrobeId:C,specId:H,maxWidth:k,minWidth:z,maxDepth:rt,minDepth:q,minHeight:it,maxHeight:ct,count:dt,size:lt,charId:pt})}:void 0}):i("div",{}),i(At,{})]})]})}function de(){var N,o;const{permissions:I}=y(W),e=_(Mt);_(Ut);const r=_(vt),n=y(bt),d=y(Wt),c=I.get(b.MATERIALS_DB),m=y(j),A=y(Et),g=E.exports.useMemo(()=>[...d.keys()][0]||0,[d]),[R,C]=E.exports.useState(g),x=E.exports.useMemo(()=>n.filter(t=>t.id===R),[n,R]),O=E.exports.useMemo(()=>x.filter(t=>t.id===R).map(t=>t.charId),[x,R]),w=[...m.keys()].filter(t=>{var u,l;return((u=m.get(t))==null?void 0:u.char_type_id)===((l=A.get(R))==null?void 0:l.charType)}),P=E.exports.useMemo(()=>O[0]||0,[O]),[f,B]=E.exports.useState(P),h=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0}],s=[];O.forEach(t=>{var u,l;return s.push({key:t,data:[(u=m.get(t))==null?void 0:u.name,(l=m.get(t))==null?void 0:l.code]})});const T=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:f,displayValue:t=>{var u;return((u=m.get(t))==null?void 0:u.name)||""},list:w,message:S.ENTER_CAPTION,inputType:D.LIST}];return E.exports.useEffect(()=>{C(g)},[d]),L(Y,{children:[L("div",{children:[i("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:i(Z,{title:"\u0422\u0438\u043F \u0444\u0430\u0441\u0430\u0434\u0430: ",value:R,items:[...d.keys()],displayValue:t=>d.get(t)||"",onChange:t=>{C(t)}})}),i("hr",{}),s.length>0&&i(J,{header:h,content:s,onSelectRow:t=>{B(t)}})]}),(c==null?void 0:c.Read)&&s.length>0?i(Q,{name:((N=A.get(R))==null?void 0:N.name)+""+((o=m.get(f))==null?void 0:o.name),items:T,onDelete:c!=null&&c.Delete?async()=>{const t=await r({id:R,charId:f});return B(O[0]||0),t}:void 0,onAdd:c!=null&&c.Create?async(t,u)=>{const l=u[0];return x.find(X=>X.charId===l)?{success:!1,message:S.MATERIAL_EXIST}:await e({id:R,charId:l})}:void 0}):i("div",{})]})}function le(){var f,B;const{permissions:I}=y(W),e=_(Ht),r=_(Ft),n=_(Vt),d=y(Xt),c=y(Gt),m=I.get(b.MATERIALS_DB),A=y(j),g=[...A.keys()].filter(h=>{var s;return((s=A.get(h))==null?void 0:s.char_type_id)===Tt.COLOR}),[R,C]=E.exports.useState(d[0].charId),x=((f=d.find(h=>h.charId===R))==null?void 0:f.purposeId)||$t.BOTH,O=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",sorted:!0}],w=[];d.forEach(h=>{var s,T;return w.push({key:h.charId,data:[(s=A.get(h.charId))==null?void 0:s.name,(T=A.get(h.charId))==null?void 0:T.code,c.get(h.purposeId)]})});const P=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:R,displayValue:h=>{var s;return((s=A.get(h))==null?void 0:s.name)||""},list:g,message:S.ENTER_CAPTION,inputType:D.LIST},{title:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435:",value:x,displayValue:h=>c.get(h)||"",list:[...c.keys()],message:S.ENTER_CAPTION,inputType:D.LIST}];return E.exports.useEffect(()=>{C(d[0].charId)},[d]),L(Y,{children:[i("div",{children:w.length>0&&i(J,{header:O,content:w,onSelectRow:h=>{C(h)}})}),(m==null?void 0:m.Read)&&w.length>0?i(Q,{name:(B=A.get(R))==null?void 0:B.name,items:P,onDelete:m!=null&&m.Delete?async()=>{const h=await n(R);return C(0),h}:void 0,onAdd:m!=null&&m.Create?async(h,s)=>{const T=s[0],N=s[1];return d.find(t=>t.charId===T)?{success:!1,message:S.MATERIAL_EXIST}:await e({charId:T,purposeId:N})}:void 0,onUpdate:m!=null&&m.Update?async(h,s)=>{const T=s[0],N=s[1];return await r({charId:R,purposeId:x},{charId:T,purposeId:N})}:void 0}):i("div",{})]})}const V=new Map;V.set(1,"\u041D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440\u0430");V.set(2,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438");V.set(3,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438 \u043D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440");V.set(4,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438 \u0444\u0430\u0441\u0430\u0434\u043E\u0432");V.set(5,"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A");V.set(6,"\u0414\u0421\u041F - \u041A\u0440\u043E\u043C\u043A\u0430 - \u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430");V.set(7,"\u0414\u0435\u0442\u0430\u043B\u0438\u0440\u043E\u0432\u043A\u0438");V.set(8,"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430");function he(){const I=zt(),{permissions:e}=y(W),r=e.get(b.SPECIFICATION),[n,d]=E.exports.useState(1),c=[...V.entries()].map((A,g)=>i("div",{className:n===A[0]?"tab-button-active":"tab-button-inactive",onClick:()=>{d(A[0])},role:"button",children:A[1]},g)),m=pe(n);return E.exports.useEffect(()=>{r!=null&&r.Read||I("/")},[r]),L("div",{className:"database-edit-container",children:[i("div",{className:"tab-header-container",children:c}),m]})}function pe(I){const e=new Map;return e.set(1,i(Yt,{})),e.set(2,i(Jt,{})),e.set(3,i(Qt,{})),e.set(6,i(qt,{})),e.set(7,i(ae,{})),e.set(8,i(ce,{})),e.set(4,i(de,{})),e.set(5,i(le,{})),e.get(I)||i(kt,{})}export{he as default};

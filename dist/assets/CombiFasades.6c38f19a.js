import{c as e,u as g,a as d,L as o4,N as E4,R as n4,r as x,O as x4,j as v,Q as b,C as $,U as V,P as O,e as a4,V as C4,X as f4,i as c4,Y as X,Z as F4,_ as A4,$ as y4,a0 as b4,a1 as D4,a2 as w4,a3 as T4,a4 as I4,a5 as W4,a6 as H4,a7 as B4,a8 as R4,a9 as e4,aa as N4,ab as P4,ac as w,ad as l4,ae as S4,af as k4,ag as M4,ah as $4,ai as V4,aj as O4,ak as L4,al as _4,am as j4,an as G4,ao as U4,ap as r4,aq as z4,ar as q4,b as Y4,H as d4,as as K4,at as h4,au as Q4,av as X4,aw as t4,ax as Z4,ay as J4}from"./index.13593b89.js";import{I as Z,P as m4,S as Q,s as uu,a as eu}from"./SpecificationTable.356ee2a6.js";function L(u){return e("div",{className:"property-row",children:u.children})}const i4=[2,3,4,5,6];function tu(){const u=g(a4),i=g(C4),t=g(f4),n=g(c4),{profile:l,fasadCount:h,type:c,wardHeight:a,wardWidth:p}=g(X),s=d(F4),o=d(A4),A=d(y4),D=d(b4),C=d(D4),T=o4(),F=E4(),I=d(w4),W=d(T4),k=d(I4),{next:B,previous:R}=g(W4),E=d(H4),f=d(B4),y=u.permissions.get(n4.COMBIFASADES),H=!(y!=null&&y.Create),_=!(y!=null&&y.Read),j=x.exports.useMemo(()=>[...i.keys()].filter(m=>m!==x4.GARDEROB),[i]),G=async()=>(await F("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u0448\u043A\u0430\u0444\u0430"),!1),U=async()=>(await F("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0432\u044B\u0441\u043E\u0442\u0435"),!1),z=async()=>(await F("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0448\u0438\u0440\u0438\u043D\u0435"),!1),q=async()=>(await F("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),!1),Y=async()=>(await F("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u043A\u043E\u043B-\u0432\u0435 \u0444\u0430\u0441\u0430\u0434\u043E\u0432"),!1);return v("div",{className:"properties-bar",children:[v("div",{className:"d-flex flex-nowrap justify-content-between",children:[e("div",{children:"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0448\u043A\u0430\u0444\u0430"}),v(Z,{justifyContent:"flex-end",children:[e(b,{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",icon:"new",onClick:async()=>{await T("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435?")&&I()}}),e(b,{title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",icon:"open",disabled:_,onClick:()=>{k()}}),e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:"save",disabled:H,onClick:()=>{W()}}),e(b,{title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",icon:"undo",disabled:!R,onClick:()=>{E()}}),e(b,{title:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",icon:"redo",disabled:!B,onClick:()=>{f()}})]})]}),e("hr",{}),v(m4,{children:[e($,{title:"\u0422\u0438\u043F:",value:c,items:j,displayValue:m=>i.get(m)||"",onChange:m=>{C([m,G])}}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),e(L,{children:e(V,{name:"width",value:p,type:O.INTEGER_POSITIVE_NUMBER,min:900,max:4e3,setValue:m=>{A([+m,z])},submitOnLostFocus:!0})}),e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),e(L,{children:e(V,{name:"height",value:a,type:O.INTEGER_POSITIVE_NUMBER,min:1800,max:2700,setValue:m=>{D([+m,U])},submitOnLostFocus:!0})}),e(Q,{title:"\u041A\u043E\u043B-\u0432\u043E \u0444\u0430\u0441\u0430\u0434\u043E\u0432:",value:h,items:i4,displayValue:m=>v("div",{children:["\xA0",m,"\xA0"]}),onChange:m=>{o([+m,Y])},columns:i4.length}),e($,{title:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C:",value:l.id,items:[...t.keys()],displayValue:m=>{var N,P;return((P=n.get(((N=t.get(m))==null?void 0:N.charId)||0))==null?void 0:P.name)||""},onChange:m=>{s([m,q])}})]})]})}function s4({title:u,onClick:i,iconPressed:t,iconUnPressed:n,pressed:l,disabled:h=!1,visible:c=!0}){let a=h?"button-disabled":"button";a+=l?" button-down":" button-up";const{onMouseOver:p,onMouseLeave:s}=R4(u);return e("div",{style:{visibility:c?"visible":"hidden"},className:`${a} ${l?t:n} noselect`,onClick:o=>{h||(o.stopPropagation(),i())},onMouseOver:o=>{p(o,{disabled:h})},onMouseLeave:()=>{s()},onContextMenu:o=>{o.preventDefault()}})}const iu=[1,2,3,4,5,6,7,8,9,10],M=new Map;function su(){const{permissions:u}=g(a4),i=u.get(n4.TEMPLATE),t=g(l4).at(-1),n=t==null?void 0:t.parent,l=g(S4),h=g(k4),c=g(c4),{width:a,height:p,materialId:s,fasadType:o,direction:A,directions:D,sectionCount:C,fixHeight:T,fixWidth:F,disabledWidth:I,disabledHeight:W,disabledFixHeight:k,disabledFixWidth:B}=ou(t),R=x.exports.useMemo(()=>{const r=h.filter(S=>S.id===o);return(o===e4.DSP||o===e4.LACOBEL?r.toSorted((S,v4)=>{var J,u4;return(((J=c.get(S.charId))==null?void 0:J.name)||"")>(((u4=c.get(v4.charId))==null?void 0:u4.name)||"")?1:-1}):r).map(S=>S.charId)},[h,o,c]),E=t?iu:[],f=d(M4),y=d($4),H=d(V4),_=d(O4),j=d(L4),G=d(_4),U=d(j4),z=d(G4),q=d(U4),Y=d(r4),m=d(z4),N=N4(n),P=P4(n),g4=o4();return v("div",{className:"properties-bar",onClick:r=>{r.stopPropagation()},children:[v("div",{className:"property-bar-header",children:["\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0444\u0430\u0441\u0430\u0434\u0430",v(Z,{justifyContent:"flex-end",children:[e(b,{title:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430",icon:"new",disabled:(t==null?void 0:t.level)===0&&!t.children.length,onClick:async()=>{await g4("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430?")&&f()}}),(i==null?void 0:i.Read)&&e(b,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437 \u0448\u0430\u0431\u043B\u043E\u043D\u0430",icon:"open",visible:t!==null,onClick:()=>{m(!1)}}),(i==null?void 0:i.Create)&&e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A \u0448\u0430\u0431\u043B\u043E\u043D",icon:"save",visible:t!==null,onClick:()=>{m(!0)}}),e(b,{title:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u0432\u0435\u0440\u0445",icon:"selectParent",onClick:()=>{Y(n)},disabled:t===null||(t==null?void 0:t.level)===0})]})]}),e("hr",{}),v(m4,{children:[e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),v(L,{children:[e(V,{value:p,type:O.INTEGER_POSITIVE_NUMBER,min:1,setValue:r=>{y(+r)},disabled:W,width:"100px"}),e(s4,{pressed:T,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u044B\u0441\u043E\u0442\u0443",visible:!k,onClick:()=>{j(!T)}}),P>0&&!T&&e("span",{children:`${t==null?void 0:t.heightRatio}/${P}`})]}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),v(L,{children:[e(V,{value:a,type:O.INTEGER_POSITIVE_NUMBER,min:1,setValue:r=>{H(+r)},disabled:I,width:"100px"}),e(s4,{pressed:F,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0448\u0438\u0440\u0438\u043D\u0443",visible:!B,onClick:()=>{_(!F)}}),N>0&&!F&&e("span",{children:`${t==null?void 0:t.widthRatio}/${N}`})]}),e($,{title:"\u0422\u0438\u043F:",value:o,items:[...l.keys()],displayValue:r=>l.get(r),disabled:!t,onChange:r=>{G(r)}}),e($,{title:"\u0426\u0432\u0435\u0442/\u0420\u0438\u0441\u0443\u043D\u043E\u043A:",value:s,items:R,displayValue:r=>{var K;return(K=c.get(r))==null?void 0:K.name},disabled:!t,onChange:r=>{U(r)}}),e(Q,{title:"\u041D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F:",value:A,items:[...D.keys()],displayValue:r=>D.get(r),disabled:!t,onChange:r=>{z(r)}}),e(Q,{title:"\u041A\u043E\u043B-\u0432\u043E \u0441\u0435\u043A\u0446\u0438\u0439:",value:C,items:E,displayValue:r=>`${r}`,disabled:!t,onChange:r=>{q(r)},columns:5})]})]})}function ou(u){const i=(u==null?void 0:u.width)||0,t=(u==null?void 0:u.height)||0,n=(u==null?void 0:u.materialId)||0,l=(u==null?void 0:u.fasadType)||0;M.clear(),u&&(M.set(w.WIDTH,"\u0412\u0435\u0440\u0442."),M.set(w.HEIGHT,"\u0413\u043E\u0440\u0438\u0437."));const h=u==null?void 0:u.division,c=u&&u.children.length>1?u.children.length:1,a=(u==null?void 0:u.fixedWidth)||!1,p=(u==null?void 0:u.fixedHeight)||!1,s=u==null?void 0:u.parent;let o=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.HEIGHT||u.fixedWidth,A=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.WIDTH||u.fixedHeight;const D=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.HEIGHT,C=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.WIDTH;return o=o||!!(u&&u.level<=1&&(s==null?void 0:s.division)===w.HEIGHT),A=A||!!(u&&u.level<=1&&(s==null?void 0:s.division)===w.WIDTH),{width:i,height:t,materialId:n,fasadType:l,direction:h,directions:M,sectionCount:c,fixHeight:p,fixWidth:a,disabledWidth:o,disabledHeight:A,disabledFixHeight:C,disabledFixWidth:D}}function nu(){return e("div",{className:"fixedHeight"})}function au(){return e("div",{className:"fixedWidth"})}function cu(){return e("div",{className:"fixedBoth"})}function p4(u){const i=u.fasad,t=q4(i),n=i.children.length===0,h=u.activeFasades.includes(i),c=i.backImageProps;t||(c.top=0,c.left=0,c.size="");const{showFixIcons:a}=g(K4),p=d(r4),s=Y4(i.materialId),o=x.exports.useRef(null),A=x.exports.useRef(null);let D={gridTemplateRows:"1fr",gridTemplateColumns:"1fr"};if(!n){const E=i.division===w.HEIGHT,f=E?i.height:i.width,y=i.children.map(H=>`${(E?(H.height+1)/f:(H.width+1)/f).toFixed(3)}fr`).join(" ");D=E?{gridTemplateRows:y,gridTemplateColumns:"1fr"}:{gridTemplateRows:"1fr",gridTemplateColumns:y}}let C=i.level===0?{height:"100%"}:{};C={...C,boxShadow:h?"inset 0px 0px 10px red":""};let T={},F="";n?(C={...C,display:"flex",overflow:"hidden",flexShrink:"0",justifyContent:"center",alignItems:"center",objectFit:"cover",cursor:"pointer",border:"1px solid black",backgroundRepeat:"repeat"},T={onClick:E=>{E.stopPropagation(),p(i,E.shiftKey===!0)}},F="fasad-section"):C={...C,border:h?"1px solid red":"",backgroundColor:"white",backgroundImage:""};const I=i.children.length===0&&i.fixedHeight&&a,W=i.children.length===0&&i.fixedWidth&&a,B=I&&W?e(cu,{}):I?e(nu,{}):W?e(au,{}):e(d4,{}),R=i.children.length>1?i.children.map((E,f)=>e(p4,{fasad:E,activeFasades:u.activeFasades,rootFasad:u.rootFasad},f)):"";return x.exports.useEffect(()=>{const E=new Image,f=s;E.src=f,o.current&&(o.current.style.backgroundImage=f||getComputedStyle(o.current).getPropertyValue("--default-image")),o.current&&n&&f&&(o.current.style.backgroundImage=`url(${f})`)},[s,n]),v("div",{ref:n?o:A,className:F,style:{display:"grid",...D,gap:"1px",...C},...T,children:[R,B]})}function lu({index:u}){const{rootFasades:i}=g(X),t=g(h4),n=window.innerWidth,l=i[u],h=l.width/l.height,c=g(l4),a=x.exports.useRef(null),p=t===u?"fw-bold":"",s=o=>{a.current&&(a.current.style.width=a.current.offsetHeight*o+"px")};return x.exports.useLayoutEffect(()=>{s(h)},[h,n]),v("div",{className:"fasad-container",children:[e("div",{className:`text-center ${p}`,children:`${u+1}`}),e("div",{ref:a,className:"fasad-section-container",style:{height:"100%",width:"auto"},children:e(p4,{fasad:l,activeFasades:c,rootFasad:l})})]})}function ru(){const[,u]=x.exports.useState(0),[{rootFasades:i}]=Q4(X),t=i[0].width/i[0].height,n=x.exports.useRef(null),l=i.map((c,a)=>e(lu,{index:a},a)),h=window.innerWidth;return x.exports.useEffect(()=>{const c=()=>u(Math.random());return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}},[]),x.exports.useLayoutEffect(()=>{du(t,i,n)},[h,t,i]),e("div",{ref:n,className:"rootfasades-container",children:l})}const du=(u,i,t)=>{if(!t.current)return;const n=document.querySelector(".properties-container"),l=document.querySelector(".combifasades-container"),h=X4(),c=parseFloat(getComputedStyle(t.current).gap);if(h){const a=n.offsetHeight,p=l.offsetWidth-n.offsetWidth,s=a*u,o=Math.min(Math.floor(p/(s+c)),i.length),A=s*o;t.current.style.height=`${a}px`,t.current.style.width=`${A}px`}else{const a=Math.ceil(i.length/2),p=parseFloat(getComputedStyle(n).width),o=p/a/u;t.current.style.width=`${p}px`,t.current.style.height=`${o}px`}};function hu(){const u=d(uu),i=g(Z4),t=g(h4),n=d(J4),[l,h]=x.exports.useState(0),c=i[l]||[],a=x.exports.useMemo(()=>i.map((p,s)=>e("div",{role:"button",className:s===l?"tab-button-active":"tab-button-inactive",onClick:()=>{n(s)},children:`\u0424\u0430\u0441\u0430\u0434 ${s+1}`},s)),[i,l]);return x.exports.useEffect(()=>{h(t)},[t]),v("div",{className:"ml-auto",children:[e(Z,{justifyContent:"flex-end",children:e(b,{icon:"excel",title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",onClick:()=>u(c,`\u0424\u0430\u0441\u0430\u0434 (${l+1} \u0438\u0437 ${i.length})`)})}),v("div",{className:"ml-auto",children:[e("div",{className:"d-flex flex-row flex-nowrap justify-content-start align-items-center gap-1",children:a}),e("hr",{}),e(eu,{purposes:[t4.FASAD,t4.BOTH],specification:c})]})]})}function gu(){return e(d4,{children:e("div",{className:"main-container",children:v("div",{className:"combifasades-container",children:[v("div",{className:"properties-container",children:[e(tu,{}),e(su,{})]}),e(ru,{}),e(hu,{})]})})})}export{gu as default};

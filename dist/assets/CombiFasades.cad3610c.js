import{c as e,u as g,a as d,L as o4,N as E4,R as n4,r as x,O as x4,j as v,Q as b,C as M,U as $,P as V,e as a4,V as C4,X as f4,i as c4,Y as Z,Z as F4,_ as A4,$ as y4,a0 as b4,a1 as D4,a2 as w4,a3 as T4,a4 as I4,a5 as W4,a6 as H4,a7 as B4,a8 as R4,a9 as e4,aa as N4,ab as P4,ac as D,ad as l4,ae as S4,af as k4,ag as M4,ah as $4,ai as V4,aj as O4,ak as L4,al as _4,am as j4,an as G4,ao as U4,ap as r4,aq as z4,ar as q4,b as Y4,H as d4,as as Q4,at as h4,au as X4,av as Z4,aw as t4,ax as J4,ay as K4}from"./index.8ad0debc.js";import{I as J,P as m4,S as X,s as uu,a as eu}from"./SpecificationTable.18fa2420.js";function O(u){return e("div",{className:"property-row",children:u.children})}const i4=[2,3,4,5,6];function tu(){const u=g(a4),t=g(C4),i=g(f4),o=g(c4),{profile:n,fasadCount:h,type:l,wardHeight:a,wardWidth:p}=g(Z),s=d(F4),c=d(A4),F=d(y4),E=d(b4),w=d(D4),T=o4(),A=E4(),I=d(w4),S=d(T4),H=d(I4),{next:B,previous:C}=g(W4),f=d(H4),W=d(B4),y=u.permissions.get(n4.COMBIFASADES),L=!(y!=null&&y.Create),_=!(y!=null&&y.Read),j=x.exports.useMemo(()=>[...t.keys()].filter(m=>m!==x4.GARDEROB),[t]),G=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u0448\u043A\u0430\u0444\u0430"),!1),U=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0432\u044B\u0441\u043E\u0442\u0435"),!1),z=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0448\u0438\u0440\u0438\u043D\u0435"),!1),q=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),!1),Y=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u043A\u043E\u043B-\u0432\u0435 \u0444\u0430\u0441\u0430\u0434\u043E\u0432"),!1);return v("div",{className:"properties-bar",children:[v("div",{className:"d-flex flex-nowrap justify-content-between",children:[e("div",{children:"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0448\u043A\u0430\u0444\u0430"}),v(J,{justifyContent:"flex-end",children:[e(b,{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",icon:"new",onClick:async()=>{await T("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435?")&&I()}}),e(b,{title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",icon:"open",disabled:_,onClick:()=>{H()}}),e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:"save",disabled:L,onClick:()=>{S()}}),e(b,{title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",icon:"undo",disabled:!C,onClick:()=>{f()}}),e(b,{title:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",icon:"redo",disabled:!B,onClick:()=>{W()}})]})]}),e("hr",{}),v(m4,{children:[e(M,{title:"\u0422\u0438\u043F:",value:l,items:j,displayValue:m=>t.get(m)||"",onChange:m=>{w([m,G])}}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),e(O,{children:e($,{name:"width",value:p,type:V.INTEGER_POSITIVE_NUMBER,min:900,max:4e3,setValue:m=>{F([+m,z])},submitOnLostFocus:!0})}),e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),e(O,{children:e($,{name:"height",value:a,type:V.INTEGER_POSITIVE_NUMBER,min:1800,max:2700,setValue:m=>{E([+m,U])},submitOnLostFocus:!0})}),e(X,{title:"\u041A\u043E\u043B-\u0432\u043E \u0444\u0430\u0441\u0430\u0434\u043E\u0432:",value:h,items:i4,displayValue:m=>v("div",{children:["\xA0",m,"\xA0"]}),onChange:m=>{c([+m,Y])},columns:i4.length}),e(M,{title:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C:",value:n.id,items:[...i.keys()],displayValue:m=>{var R,N;return((N=o.get(((R=i.get(m))==null?void 0:R.charId)||0))==null?void 0:N.name)||""},onChange:m=>{s([m,q])}})]})]})}function s4({title:u,onClick:t,iconPressed:i,iconUnPressed:o,pressed:n,disabled:h=!1,visible:l=!0}){let a=h?"button-disabled":"button";a+=n?" button-down":" button-up";const{onMouseOver:p,onMouseLeave:s}=R4(u);return e("div",{style:{visibility:l?"visible":"hidden"},className:`${a} ${n?i:o} noselect`,onClick:c=>{h||(c.stopPropagation(),t())},onMouseOver:c=>{p(c,{disabled:h})},onMouseLeave:()=>{s()},onContextMenu:c=>{c.preventDefault()}})}const iu=[1,2,3,4,5,6,7,8,9,10],k=new Map;function su(){const{permissions:u}=g(a4),t=u.get(n4.TEMPLATE),i=g(l4),o=i==null?void 0:i.parent,n=g(S4),h=g(k4),l=g(c4),{width:a,height:p,materialId:s,fasadType:c,direction:F,directions:E,sectionCount:w,fixHeight:T,fixWidth:A,disabledWidth:I,disabledHeight:S,disabledFixHeight:H,disabledFixWidth:B}=ou(i),C=x.exports.useMemo(()=>{const r=h.filter(P=>P.id===c);return(c===e4.DSP||c===e4.LACOBEL?r.toSorted((P,v4)=>{var K,u4;return(((K=l.get(P.charId))==null?void 0:K.name)||"")>(((u4=l.get(v4.charId))==null?void 0:u4.name)||"")?1:-1}):r).map(P=>P.charId)},[h,c,l]),f=i?iu:[],W=d(M4),y=d($4),L=d(V4),_=d(O4),j=d(L4),G=d(_4),U=d(j4),z=d(G4),q=d(U4),Y=d(r4),m=d(z4),R=N4(o),N=P4(o),g4=o4();return v("div",{className:"properties-bar",onClick:r=>{r.stopPropagation()},children:[v("div",{className:"property-bar-header",children:["\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0444\u0430\u0441\u0430\u0434\u0430",v(J,{justifyContent:"flex-end",children:[e(b,{title:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430",icon:"new",disabled:(i==null?void 0:i.level)===0&&!i.children.length,onClick:async()=>{await g4("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430?")&&W()}}),(t==null?void 0:t.Read)&&e(b,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437 \u0448\u0430\u0431\u043B\u043E\u043D\u0430",icon:"open",visible:i!==null,onClick:()=>{m(!1)}}),(t==null?void 0:t.Create)&&e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A \u0448\u0430\u0431\u043B\u043E\u043D",icon:"save",visible:i!==null,onClick:()=>{m(!0)}}),e(b,{title:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u0432\u0435\u0440\u0445",icon:"selectParent",onClick:()=>{Y(o)},disabled:i===null||(i==null?void 0:i.level)===0})]})]}),e("hr",{}),v(m4,{children:[e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),v(O,{children:[e($,{value:p,type:V.INTEGER_POSITIVE_NUMBER,min:1,setValue:r=>{y(+r)},disabled:S,width:"100px"}),e(s4,{pressed:T,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u044B\u0441\u043E\u0442\u0443",visible:!H,onClick:()=>{j(!T)}}),N>0&&!T&&e("span",{children:`${i==null?void 0:i.heightRatio}/${N}`})]}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),v(O,{children:[e($,{value:a,type:V.INTEGER_POSITIVE_NUMBER,min:1,setValue:r=>{L(+r)},disabled:I,width:"100px"}),e(s4,{pressed:A,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0448\u0438\u0440\u0438\u043D\u0443",visible:!B,onClick:()=>{_(!A)}}),R>0&&!A&&e("span",{children:`${i==null?void 0:i.widthRatio}/${R}`})]}),e(M,{title:"\u0422\u0438\u043F:",value:c,items:[...n.keys()],displayValue:r=>n.get(r),disabled:!i,onChange:r=>{G(r)}}),e(M,{title:"\u0426\u0432\u0435\u0442/\u0420\u0438\u0441\u0443\u043D\u043E\u043A:",value:s,items:C,displayValue:r=>{var Q;return(Q=l.get(r))==null?void 0:Q.name},disabled:!i,onChange:r=>{U(r)}}),e(X,{title:"\u041D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F:",value:F,items:[...E.keys()],displayValue:r=>E.get(r),disabled:!i,onChange:r=>{z(r)}}),e(X,{title:"\u041A\u043E\u043B-\u0432\u043E \u0441\u0435\u043A\u0446\u0438\u0439:",value:w,items:f,displayValue:r=>`${r}`,disabled:!i,onChange:r=>{q(r)},columns:5})]})]})}function ou(u){const t=(u==null?void 0:u.width)||0,i=(u==null?void 0:u.height)||0,o=(u==null?void 0:u.materialId)||0,n=(u==null?void 0:u.fasadType)||0;k.clear(),u&&(k.set(D.WIDTH,"\u0412\u0435\u0440\u0442."),k.set(D.HEIGHT,"\u0413\u043E\u0440\u0438\u0437."));const h=u==null?void 0:u.division,l=u&&u.children.length>1?u.children.length:1,a=(u==null?void 0:u.fixedWidth)||!1,p=(u==null?void 0:u.fixedHeight)||!1,s=u==null?void 0:u.parent;let c=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===D.HEIGHT||u.fixedWidth,F=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===D.WIDTH||u.fixedHeight;const E=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===D.HEIGHT,w=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===D.WIDTH;return c=c||!!(u&&u.level<=1&&(s==null?void 0:s.division)===D.HEIGHT),F=F||!!(u&&u.level<=1&&(s==null?void 0:s.division)===D.WIDTH),{width:t,height:i,materialId:o,fasadType:n,direction:h,directions:k,sectionCount:l,fixHeight:p,fixWidth:a,disabledWidth:c,disabledHeight:F,disabledFixHeight:w,disabledFixWidth:E}}function nu(){return e("div",{className:"fixedHeight"})}function au(){return e("div",{className:"fixedWidth"})}function cu(){return e("div",{className:"fixedBoth"})}function p4(u){const t=u.fasad,i=q4(t),o=t.children.length===0,n=u.activeFasad,h=t.backImageProps;i||(h.top=0,h.left=0,h.size="");const{showFixIcons:l}=g(Q4),a=d(r4),p=Y4(t.materialId),s=x.exports.useRef(null),c=x.exports.useRef(null);let F={gridTemplateRows:"1fr",gridTemplateColumns:"1fr"};if(!o){const C=t.division===D.HEIGHT,f=C?t.height:t.width,W=t.children.map(y=>`${(C?(y.height+1)/f:(y.width+1)/f).toFixed(3)}fr`).join(" ");F=C?{gridTemplateRows:W,gridTemplateColumns:"1fr"}:{gridTemplateRows:"1fr",gridTemplateColumns:W}}let E=t.level===0?{height:"100%"}:{};E={...E,boxShadow:t===n?"inset 0px 0px 10px red":""};let w={},T="";o?(E={...E,display:"flex",overflow:"hidden",flexShrink:"0",justifyContent:"center",alignItems:"center",objectFit:"cover",cursor:"pointer",border:"1px solid black",backgroundRepeat:"repeat"},w={onClick:C=>{C.stopPropagation(),a(t)}},T="fasad-section"):E={...E,border:t===n?"1px solid red":"",backgroundColor:"white",backgroundImage:""};const A=t.children.length===0&&t.fixedHeight&&l,I=t.children.length===0&&t.fixedWidth&&l,H=A&&I?e(cu,{}):A?e(nu,{}):I?e(au,{}):e(d4,{}),B=t.children.length>1?t.children.map((C,f)=>e(p4,{fasad:C,activeFasad:u.activeFasad,rootFasad:u.rootFasad},f)):"";return x.exports.useEffect(()=>{const C=new Image,f=p;C.src=f,s.current&&(s.current.style.backgroundImage=f||getComputedStyle(s.current).getPropertyValue("--default-image")),s.current&&o&&f&&(s.current.style.backgroundImage=`url(${f})`)},[p,o]),v("div",{ref:o?s:c,className:T,style:{display:"grid",...F,gap:"1px",...E},...w,children:[B,H]})}function lu({index:u}){const{rootFasades:t}=g(Z),i=g(h4),o=window.innerWidth,n=t[u],h=n.width/n.height,l=g(l4),a=x.exports.useRef(null),p=i===u?"fw-bold":"",s=c=>{a.current&&(a.current.style.width=a.current.offsetHeight*c+"px")};return x.exports.useLayoutEffect(()=>{s(h)},[h,o]),v("div",{className:"fasad-container",children:[e("div",{className:`text-center ${p}`,children:`${u+1}`}),e("div",{ref:a,className:"fasad-section-container",style:{height:"100%",width:"auto"},children:e(p4,{fasad:n,activeFasad:l,rootFasad:n})})]})}function ru(){const[,u]=x.exports.useState(0),[{rootFasades:t}]=X4(Z),i=t[0].width/t[0].height,o=x.exports.useRef(null),n=t.map((l,a)=>e(lu,{index:a},a)),h=window.innerWidth;return x.exports.useEffect(()=>{const l=()=>u(Math.random());return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]),x.exports.useLayoutEffect(()=>{du(i,t,o)},[h,i,t]),e("div",{ref:o,className:"rootfasades-container",children:n})}const du=(u,t,i)=>{if(!i.current)return;const o=document.querySelector(".properties-container"),n=document.querySelector(".combifasades-container"),h=Z4(),l=parseFloat(getComputedStyle(i.current).gap);if(h){const a=o.offsetHeight,p=n.offsetWidth-o.offsetWidth,s=a*u,c=Math.min(Math.floor(p/(s+l)),t.length),F=s*c;i.current.style.height=`${a}px`,i.current.style.width=`${F}px`}else{const a=Math.ceil(t.length/2),p=parseFloat(getComputedStyle(o).width),c=p/a/u;i.current.style.width=`${p}px`,i.current.style.height=`${c}px`}};function hu(){const u=d(uu),t=g(J4),i=g(h4),o=d(K4),[n,h]=x.exports.useState(0),l=t[n]||[],a=x.exports.useMemo(()=>t.map((p,s)=>e("div",{role:"button",className:s===n?"tab-button-active":"tab-button-inactive",onClick:()=>{o(s)},children:`\u0424\u0430\u0441\u0430\u0434 ${s+1}`},s)),[t,n]);return x.exports.useEffect(()=>{h(i)},[i]),v("div",{className:"ml-auto",children:[e(J,{justifyContent:"flex-end",children:e(b,{icon:"excel",title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",onClick:()=>u(l,`\u0424\u0430\u0441\u0430\u0434 (${n+1} \u0438\u0437 ${t.length})`)})}),v("div",{className:"ml-auto",children:[e("div",{className:"d-flex flex-row flex-nowrap justify-content-start align-items-center gap-1",children:a}),e("hr",{}),e(eu,{purposes:[t4.FASAD,t4.BOTH],specification:l})]})]})}function gu(){return e(d4,{children:e("div",{className:"main-container",children:v("div",{className:"combifasades-container",children:[v("div",{className:"properties-container",children:[e(tu,{}),e(su,{})]}),e(ru,{}),e(hu,{})]})})})}export{gu as default};

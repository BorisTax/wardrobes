import{u as y,R as W,a as _,r as h,b as Ct,m as S,I as D,j as M,E as Y,c,T as J,d as Q,e as O,f as ft,g as St,h as xt,i as j,k as _t,C as Z,l as wt,n as Nt,s as Et,o as mt,p as U,q as ht,A as $,M as tt,D as et,t as Ot,v as F,S as Bt,w as Tt,x as Pt,W as X,y as ut,P as b,z as gt,B as Lt,F as st,G as Mt,H as Ut,J as vt,K as bt,L as Wt,N as $t,O as Ht,Q as Ft,U as Vt,V as kt,X as Xt,Y as Gt,Z as zt}from"./index.e8570816.js";import Yt from"./EditSpecificationDialog.c8903161.js";function Jt(){var L,f,P,T;const{permissions:p}=y(O),e=p.get(W.MATERIALS_DB),r=_(ft),i=_(St),a=_(xt),l=y(j),d=y(_t),A=h.exports.useMemo(()=>[...l.keys()][0]||0,[l]),[I,R]=h.exports.useState(A),C=Ct(I),x=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u0422\u0438\u043F",sorted:!0}],B=[];l.forEach((s,g)=>B.push({key:g,data:[s.name,s.code,d.get(s.char_type_id)]}));const w=[{title:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:((L=l.get(I))==null?void 0:L.name)||"",message:S.ENTER_CAPTION,inputType:D.TEXT},{title:"\u041A\u043E\u0434:",value:((f=l.get(I))==null?void 0:f.code)||"",message:S.ENTER_CODE,inputType:D.TEXT},{title:"\u0422\u0438\u043F:",value:((P=l.get(I))==null?void 0:P.char_type_id)||0,displayValue:s=>d.get(s)||"",list:[...d.keys()],inputType:D.LIST,message:""},{title:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",value:C||"",message:S.ENTER_IMAGE,inputType:D.FILE}];return M(Y,{children:[c("div",{children:c(J,{header:x,content:B,onSelectRow:s=>{R(s)}})}),e!=null&&e.Read?c(Q,{name:(T=l.get(I))==null?void 0:T.name,items:w,onUpdate:e!=null&&e.Update?async(s,g)=>{const N=s[0]?g[0]:"",o=s[1]?g[1]:"",t=s[2]?g[2]:0,u=s[3]?g[3]:"";return await r({id:I,char_type_id:t,name:N,code:o,image:u})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const s=await a(I);return R([...l.keys()][0]||0),s}:void 0,onAdd:e!=null&&e.Create?async(s,g)=>{const N=s[0]?g[0]:"",o=s[1]?g[1]:"",t=s[2]?g[2]:0,u=s[3]?g[3]:"";return await i({name:N,char_type_id:t,code:o,image:u})}:void 0}):c("div",{})]})}function Qt(){var g,N;const{permissions:p}=y(O),e=_(wt),r=_(Nt),i=p.get(W.MATERIALS_DB),a=y(Et),l=y(j),d=y(mt),A=h.exports.useMemo(()=>[...a.keys()][0]||0,[a]),[I,R]=h.exports.useState(A),C=h.exports.useMemo(()=>d.filter(o=>o.id===I),[d,I]),x=h.exports.useMemo(()=>C.filter(o=>o.id===I).map(o=>o.charId),[C,I]),B=[...l.keys()].filter(o=>{var t,u;return((t=l.get(o))==null?void 0:t.char_type_id)===((u=a.get(I))==null?void 0:u.charType)}),w=h.exports.useMemo(()=>x[0]||0,[x]),[L,f]=h.exports.useState(w),P=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0}],T=[];x.forEach(o=>{var t,u;return T.push({key:o,data:[(t=l.get(o))==null?void 0:t.name,(u=l.get(o))==null?void 0:u.code]})});const s=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:L,displayValue:o=>{var t;return((t=l.get(o))==null?void 0:t.name)||""},list:B,message:S.ENTER_CAPTION,inputType:D.LIST}];return h.exports.useEffect(()=>{f(x[0]||0)},[x]),M(Y,{children:[M("div",{children:[c("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:c(Z,{title:"\u041D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440\u0430: ",value:I,items:[...a.keys()],displayValue:o=>{var t;return((t=a.get(o))==null?void 0:t.name)||""},onChange:o=>{R(o)}})}),c("hr",{}),T.length>0&&c(J,{header:P,content:T,onSelectRow:o=>{f(o)}})]}),i!=null&&i.Read?c(Q,{name:((g=a.get(I))==null?void 0:g.name)+""+((N=l.get(L))==null?void 0:N.name),items:s,onDelete:i!=null&&i.Delete?async()=>{const o=await r({id:I,charId:L});return f(x[0]||0),o}:void 0,onAdd:i!=null&&i.Create?async(o,t)=>{const u=t[0];return C.find(v=>v.charId===u)?{success:!1,message:S.MATERIAL_EXIST}:await e({id:I,charId:u})}:void 0}):c("div",{})]})}const It=U(new Map),at=U(null,async(p,e)=>{var a;const{token:r,permissions:i}=p(O);if(!((a=i.get(W.MATERIALS))!=null&&a.Read))return{success:!1,message:""};try{const l=await ht(`${$}${tt}${et}?token=${r}`);l.success&&e(It,Ot(l.data))}catch(l){console.error(l)}}),Kt=U(null,async(p,e,r)=>{var l;const{token:i,permissions:a}=p(O);if(!((l=a.get(W.MATERIALS))!=null&&l.Delete))return{success:!1,message:""};try{const d=await F(`${$}${tt}${et}`,"DELETE",JSON.stringify({id:r,token:i}));return await e(at),{success:d.success,message:d.message}}catch(d){return console.error(d),{success:!1,message:S.QUERY_ERROR}}}),Zt=U(null,async(p,e,r)=>{var l;const{token:i,permissions:a}=p(O);if(!((l=a.get(W.MATERIALS))!=null&&l.Create))return{success:!1,message:""};try{const d=await F(`${$}${tt}${et}`,"POST",JSON.stringify({data:r,token:i}));return await e(at),{success:d.success,message:d.message}}catch(d){return console.error(d),{success:!1,message:S.QUERY_ERROR}}}),jt=U(null,async(p,e,r)=>{var l;const{token:i,permissions:a}=p(O);if(!((l=a.get(W.MATERIALS))!=null&&l.Update))return{success:!1,message:""};try{const d=await F(`${$}${tt}${et}`,"PUT",JSON.stringify({data:r,token:i}));return await e(at),{success:d.success,message:d.message}}catch(d){return console.error(d),{success:!1,message:S.QUERY_ERROR}}});function qt(){var N;const{permissions:p}=y(O),e=_(at),r=p.get(W.MATERIALS),i=y(It),a=y(j),l=y(Pt),A=y(mt).filter(o=>o.id===Bt.DSP16).map(o=>o.charId),I=l.filter(o=>o.char_type_id===Tt.COLOR).map(o=>o.id),R=()=>i.keys().next().value||0,[C,x]=h.exports.useState(R()),{kromkaId:B,zaglushkaId:w}=i.get(C)||{kromkaId:0,zaglushkaId:0},L=_(Kt),f=_(Zt),P=_(jt),T=[{caption:"\u0414\u0421\u041F",sorted:!0},{caption:"\u041A\u0440\u043E\u043C\u043A\u0430",sorted:!0},{caption:"\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430",sorted:!0}],s=[];i.forEach((o,t)=>{var u,E,v;return s.push({key:t,data:[(u=a.get(t))==null?void 0:u.name,(E=a.get(o.kromkaId))==null?void 0:E.name,(v=a.get(o.zaglushkaId))==null?void 0:v.name]})});const g=[{title:"\u0414\u0421\u041F:",value:C,displayValue:o=>{var t;return((t=a.get(o))==null?void 0:t.name)||""},message:S.ENTER_CAPTION,inputType:D.LIST,list:A},{title:"\u041A\u0440\u043E\u043C\u043A\u0430:",value:B,displayValue:o=>{var t;return((t=a.get(o))==null?void 0:t.name)||""},message:S.ENTER_CODE,inputType:D.LIST,list:I},{title:"\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430:",value:w,displayValue:o=>{var t;return((t=a.get(o))==null?void 0:t.name)||""},message:S.ENTER_CODE,inputType:D.LIST,list:I}];return h.exports.useEffect(()=>{e()},[r==null?void 0:r.Read]),M(Y,{children:[c(J,{header:T,content:s,onSelectRow:o=>{x(o)}}),r!=null&&r.Read?c(Q,{name:(N=a.get(C))==null?void 0:N.name,items:g,onUpdate:r!=null&&r.Update?async(o,t)=>{const u=o[1]?t[1]:0,E=o[2]?t[2]:0;return await P({id:C,kromkaId:u,zaglushkaId:E})}:void 0,onAdd:r!=null&&r.Create?async(o,t)=>{const u=t[0],E=t[1],v=t[2];return await f({id:u,kromkaId:E,zaglushkaId:v})}:void 0,onDelete:r!=null&&r.Delete?async()=>{const o=await L(C);return x(R()),o}:void 0}):c("div",{})]})}const yt=U([]),nt=U(null,async(p,e)=>{const{token:r}=p(O);try{const i=await ht(`${$}${X}${ut}?token=${r}`);e(yt,i.data)}catch(i){console.error(i)}}),te=U(null,async(p,e,r)=>{const{token:i}=p(O);try{const a=await F(`${$}${X}${ut}`,"POST",JSON.stringify({...r,token:i}));return e(nt),{success:a.success,message:a.message}}catch(a){return console.error(a),{success:!1,message:S.QUERY_ERROR}}}),ee=U(null,async(p,e,r)=>{const{token:i}=p(O);try{const a=await F(`${$}${X}${ut}`,"PUT",JSON.stringify({...r,token:i}));return e(nt),{success:a.success,message:a.message}}catch(a){return console.error(a),{success:!1,message:S.QUERY_ERROR}}}),ue=U(null,async(p,e,r)=>{const{token:i}=p(O);try{const a=await F(`${$}${X}${ut}`,"DELETE",JSON.stringify({id:r,token:i}));return e(nt),{success:a.success,message:a.message}}catch(a){return console.error(a),{success:!1,message:S.QUERY_ERROR}}});function At(){return M("div",{className:"p-3",children:[c("strong",{children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435:"}),c("div",{children:"W - \u0448\u0438\u0440\u0438\u043D\u0430 \u0448\u043A\u0430\u0444\u0430"}),c("div",{children:"D - \u0433\u043B\u0443\u0431\u0438\u043D\u0430 \u0448\u043A\u0430\u0444\u0430"}),c("div",{children:"H - \u0432\u044B\u0441\u043E\u0442\u0430 \u0448\u043A\u0430\u0444\u0430"}),c("div",{children:"OFFSET - \u043E\u0442\u0441\u0442\u0443\u043F \u0432\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0435\u0433\u043E \u043D\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F"})]})}function se(){return{detailId:0,length:"",width:"",count:0,id:0,maxHeight:0,maxWidth:0,minHeight:0,minWidth:0,wardrobeId:0}}function ae(){var t;const{permissions:p}=y(O),e=p.get(W.MATERIALS_DB),r=_(nt),i=_(ee),a=_(te),l=_(ue),d=y(gt),A=y(Lt),[I,R]=h.exports.useState([...d.keys()][0]),C=y(yt),x=h.exports.useMemo(()=>C.filter(u=>u.wardrobeId===I),[C,I]),B=[...new Set(x.map(u=>u.detailId))],[w,L]=h.exports.useState(0),f=h.exports.useMemo(()=>x.filter(u=>!w||u.detailId===w),[x,w]),[P,T]=h.exports.useState(((t=f.at(0))==null?void 0:t.id)||0),s=f.find(u=>u.id===P)||se(),g=[{caption:"\u0414\u0435\u0442\u0430\u043B\u044C",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E",sorted:!0},{caption:"\u041A\u043E\u043B-\u0432\u043E",sorted:!0},{caption:"\u0414\u043B\u0438\u043D\u0430",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430",sorted:!0}],N=f.map(u=>({key:u.id,data:[A.get(u.detailId)||"",u.minWidth,u.maxWidth,u.minHeight,u.maxHeight,u.count,u.length,u.width]})),o=[{title:"\u0414\u0435\u0442\u0430\u043B\u044C:",value:s.detailId,displayValue:u=>A.get(u)||"",message:S.ENTER_CAPTION,inputType:D.LIST,list:[...A.keys()],listWithEmptyRow:!0},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442:",value:s.minWidth,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E:",value:s.maxWidth,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442:",value:s.minHeight,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E:",value:s.maxHeight,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u041A\u043E\u043B-\u0432\u043E:",value:s.count,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0414\u043B\u0438\u043D\u0430:",value:s.length,inputType:D.TEXT},{title:"\u0428\u0438\u0440\u0438\u043D\u0430:",value:s.width,inputType:D.TEXT}];return h.exports.useEffect(()=>{r()},[]),M(Y,{children:[M("div",{children:[c(Z,{value:I,displayValue:u=>d.get(u),items:[...d.keys()],onChange:u=>R(u)}),c("hr",{}),c(Z,{value:w,displayValue:u=>A.get(u),items:B,onChange:u=>L(u),withEmpty:!0}),c("hr",{}),c(J,{header:g,content:N,onSelectRow:u=>{T(u)}})]}),M("div",{children:[e!=null&&e.Read?c(Q,{name:A.get(s==null?void 0:s.detailId),items:o,onUpdate:e!=null&&e.Update?async(u,E)=>{const v=u[0]?E[0]:s.detailId,k=u[1]?+E[1]:s.minWidth,K=u[2]?+E[2]:s.maxWidth,n=u[3]?+E[3]:s.minHeight,m=u[4]?+E[4]:s.maxHeight,H=u[5]?+E[5]:s.count,G=u[6]?E[6]:s.length,z=u[7]?E[7]:s.width;return await i({id:s.id,wardrobeId:s.wardrobeId,detailId:v,maxWidth:K,minWidth:k,minHeight:n,maxHeight:m,count:H,length:G,width:z})}:void 0,onDelete:e!=null&&e.Delete?async()=>{var E;const u=await l(s.id);return T(((E=f.at(0))==null?void 0:E.id)||0),u}:void 0,onAdd:e!=null&&e.Create?async(u,E)=>{const v=u[0]?E[0]:s.detailId,k=u[1]?+E[1]:s.minWidth,K=u[2]?+E[2]:s.maxWidth,n=u[3]?+E[3]:s.minHeight,m=u[4]?+E[4]:s.maxHeight,H=u[5]?+E[5]:s.count,G=u[6]?E[6]:s.length,z=u[7]?E[7]:s.width;return await a({wardrobeId:I,detailId:v,maxWidth:K,minWidth:k,minHeight:n,maxHeight:m,count:H,length:G,width:z})}:void 0}):c("div",{}),c(At,{})]})]})}const Dt=U([]),ot=U(null,async(p,e)=>{const{token:r}=p(O);try{const i=await ht(`${$}${X}${st}?token=${r}`);e(Dt,i.data)}catch(i){console.error(i)}}),ne=U(null,async(p,e,r)=>{const{token:i}=p(O);try{const a=await F(`${$}${X}${st}`,"POST",JSON.stringify({...r,token:i}));return e(ot),{success:a.success,message:a.message}}catch(a){return console.error(a),{success:!1,message:S.QUERY_ERROR}}}),oe=U(null,async(p,e,r)=>{const{token:i}=p(O);try{const a=await F(`${$}${X}${st}`,"PUT",JSON.stringify({...r,token:i}));return e(ot),{success:a.success,message:a.message}}catch(a){return console.error(a),{success:!1,message:S.QUERY_ERROR}}}),re=U(null,async(p,e,r)=>{const{token:i}=p(O);try{const a=await F(`${$}${X}${st}`,"DELETE",JSON.stringify({id:r,token:i}));return e(ot),{success:a.success,message:a.message}}catch(a){return console.error(a),{success:!1,message:S.QUERY_ERROR}}});function ie(){return{charId:0,count:0,id:0,maxDepth:0,maxHeight:0,maxWidth:0,minDepth:0,minHeight:0,minWidth:0,size:"",specId:0,wardrobeId:0}}function ce(){var K;const{permissions:p}=y(O),e=p.get(W.MATERIALS_DB),r=_(ot),i=_(oe),a=_(ne),l=_(re),d=y(gt),A=y(Et),I=y(mt),R=y(j),[C,x]=h.exports.useState([...d.keys()][0]),B=y(Dt),w=h.exports.useMemo(()=>B.filter(n=>n.wardrobeId===C),[B,C]),L=[...new Set(w.map(n=>n.specId))],[f,P]=h.exports.useState(0),[T,s]=h.exports.useState(0),g=h.exports.useMemo(()=>w.filter(n=>!f||n.specId===f),[w,f]),[N,o]=h.exports.useState(g[0]&&g[0].id),t=g.find(n=>n.id===N)||ie(),u=h.exports.useMemo(()=>I.filter(n=>T?n.id===T:n.id===(t==null?void 0:t.specId)).map(n=>n.charId),[I,T,t==null?void 0:t.specId]),E=[{caption:"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u043E\u0442",sorted:!0},{caption:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u0434\u043E",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442",sorted:!0},{caption:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E",sorted:!0},{caption:"\u041A\u043E\u043B-\u0432\u043E",sorted:!0},{caption:"\u0420\u0430\u0437\u043C\u0435\u0440",sorted:!0},{caption:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430",sorted:!0}],v=g.map(n=>{var m,H;return{key:n.id,data:[((m=A.get(n.specId))==null?void 0:m.name)||"",n.minWidth,n.maxWidth,n.minDepth,n.maxDepth,n.minHeight,n.maxHeight,n.count,n.size,((H=R.get(n.charId))==null?void 0:H.name)||""]}}),k=[{title:"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430:",value:t.specId,displayValue:n=>{var m;return((m=A.get(n))==null?void 0:m.name)||""},message:S.ENTER_CAPTION,inputType:D.LIST,list:[...A.keys()],listWithEmptyRow:!0,onChange:n=>s(n)},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0442:",value:t.minWidth,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0428\u0438\u0440\u0438\u043D\u0430 \u0434\u043E:",value:t.maxWidth,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u043E\u0442:",value:t.minDepth,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0413\u043B\u0443\u0431\u0438\u043D\u0430 \u0434\u043E:",value:t.maxDepth,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442:",value:t.minHeight,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u0412\u044B\u0441\u043E\u0442\u0430 \u0434\u043E:",value:t.maxHeight,inputType:D.TEXT,propertyType:b.INTEGER_POSITIVE_NUMBER},{title:"\u041A\u043E\u043B-\u0432\u043E:",value:t.count,inputType:D.TEXT,propertyType:b.POSITIVE_NUMBER},{title:"\u0420\u0430\u0437\u043C\u0435\u0440:",value:t.size,inputType:D.TEXT,optional:!0},{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:(t==null?void 0:t.charId)||0,displayValue:n=>{var m;return((m=R.get(n))==null?void 0:m.name)||""},message:S.ENTER_CAPTION,inputType:D.LIST,list:u,listWithEmptyRow:!0,optional:!0}];return h.exports.useEffect(()=>{r()},[]),h.exports.useEffect(()=>{var n;o(((n=g.at(-1))==null?void 0:n.id)||0),s(0)},[B]),h.exports.useEffect(()=>{var n;o(((n=g.at(0))==null?void 0:n.id)||0),P(0),s(0)},[C]),M(Y,{children:[M("div",{children:[c(Z,{value:C,displayValue:n=>d.get(n),items:[...d.keys()],onChange:n=>x(n)}),c("hr",{}),c(Z,{value:f,displayValue:n=>{var m;return(m=A.get(n))==null?void 0:m.name},items:L,onChange:n=>P(n),withEmpty:!0}),c("hr",{}),c(J,{header:E,content:v,onSelectRow:n=>{o(n)}})]}),M("div",{children:[e!=null&&e.Read?c(Q,{name:((K=A.get(t.specId))==null?void 0:K.name)||"",items:k,onUpdate:e!=null&&e.Update?async(n,m)=>{const H=n[0]?m[0]:t.specId,G=n[1]?+m[1]:t.minWidth,z=n[2]?+m[2]:t.maxWidth,q=n[3]?+m[3]:t.minDepth,rt=n[4]?+m[4]:t.maxDepth,it=n[5]?+m[5]:t.minHeight,ct=n[6]?+m[6]:t.maxHeight,dt=n[7]?+m[7]:t.count,lt=n[8]?m[8]:t.size,pt=n[9]?+m[9]:t.charId;return await i({id:t.id,wardrobeId:C,specId:H,maxWidth:z,minWidth:G,maxDepth:rt,minDepth:q,minHeight:it,maxHeight:ct,count:dt,size:lt,charId:pt})}:void 0,onDelete:e!=null&&e.Delete?async()=>{var m;const n=await l(t.id);return o(((m=g.at(0))==null?void 0:m.id)||0),n}:void 0,onAdd:e!=null&&e.Create?async(n,m)=>{const H=n[0]?m[0]:t.specId,G=n[1]?+m[1]:t.minWidth,z=n[2]?+m[2]:t.maxWidth,q=n[3]?+m[3]:t.minDepth,rt=n[4]?+m[4]:t.maxDepth,it=n[5]?+m[5]:t.minHeight,ct=n[6]?+m[6]:t.maxHeight,dt=n[7]?+m[7]:t.count,lt=n[8]?m[8]:t.size,pt=n[9]?+m[9]:t.charId;return await a({wardrobeId:C,specId:H,maxWidth:z,minWidth:G,maxDepth:rt,minDepth:q,minHeight:it,maxHeight:ct,count:dt,size:lt,charId:pt})}:void 0}):c("div",{}),c(At,{})]})]})}function de(){var N,o;const{permissions:p}=y(O),e=_(Mt);_(Ut);const r=_(vt),i=y(bt),a=y(Wt),l=p.get(W.MATERIALS_DB),d=y(j),A=y(Et),I=h.exports.useMemo(()=>[...a.keys()][0]||0,[a]),[R,C]=h.exports.useState(I),x=h.exports.useMemo(()=>i.filter(t=>t.id===R),[i,R]),B=h.exports.useMemo(()=>x.filter(t=>t.id===R).map(t=>t.charId),[x,R]),w=[...d.keys()].filter(t=>{var u,E;return((u=d.get(t))==null?void 0:u.char_type_id)===((E=A.get(R))==null?void 0:E.charType)}),L=h.exports.useMemo(()=>B[0]||0,[B]),[f,P]=h.exports.useState(L),T=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0}],s=[];B.forEach(t=>{var u,E;return s.push({key:t,data:[(u=d.get(t))==null?void 0:u.name,(E=d.get(t))==null?void 0:E.code]})});const g=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:f,displayValue:t=>{var u;return((u=d.get(t))==null?void 0:u.name)||""},list:w,message:S.ENTER_CAPTION,inputType:D.LIST}];return h.exports.useEffect(()=>{C(I)},[a]),M(Y,{children:[M("div",{children:[c("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:c(Z,{title:"\u0422\u0438\u043F \u0444\u0430\u0441\u0430\u0434\u0430: ",value:R,items:[...a.keys()],displayValue:t=>a.get(t)||"",onChange:t=>{C(t)}})}),c("hr",{}),s.length>0&&c(J,{header:T,content:s,onSelectRow:t=>{P(t)}})]}),(l==null?void 0:l.Read)&&s.length>0?c(Q,{name:((N=A.get(R))==null?void 0:N.name)+""+((o=d.get(f))==null?void 0:o.name),items:g,onDelete:l!=null&&l.Delete?async()=>{const t=await r({id:R,charId:f});return P(B[0]||0),t}:void 0,onAdd:l!=null&&l.Create?async(t,u)=>{const E=u[0];return x.find(k=>k.charId===E)?{success:!1,message:S.MATERIAL_EXIST}:await e({id:R,charId:E})}:void 0}):c("div",{})]})}function le(){var f,P;const{permissions:p}=y(O),e=_(Ht),r=_(Ft),i=_(Vt),a=y(kt),l=y(Xt),d=p.get(W.MATERIALS_DB),A=y(j),I=[...A.keys()].filter(T=>{var s;return((s=A.get(T))==null?void 0:s.char_type_id)===Tt.COLOR}),[R,C]=h.exports.useState(a[0].charId),x=((f=a.find(T=>T.charId===R))==null?void 0:f.purposeId)||$t.BOTH,B=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0},{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",sorted:!0}],w=[];a.forEach(T=>{var s,g;return w.push({key:T.charId,data:[(s=A.get(T.charId))==null?void 0:s.name,(g=A.get(T.charId))==null?void 0:g.code,l.get(T.purposeId)]})});const L=[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:",value:R,displayValue:T=>{var s;return((s=A.get(T))==null?void 0:s.name)||""},list:I,message:S.ENTER_CAPTION,inputType:D.LIST},{title:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435:",value:x,displayValue:T=>l.get(T)||"",list:[...l.keys()],message:S.ENTER_CAPTION,inputType:D.LIST}];return h.exports.useEffect(()=>{C(a[0].charId)},[a]),M(Y,{children:[c("div",{children:w.length>0&&c(J,{header:B,content:w,onSelectRow:T=>{C(T)}})}),(d==null?void 0:d.Read)&&w.length>0?c(Q,{name:(P=A.get(R))==null?void 0:P.name,items:L,onDelete:d!=null&&d.Delete?async()=>{const T=await i(R);return C(0),T}:void 0,onAdd:d!=null&&d.Create?async(T,s)=>{const g=s[0],N=s[1];return a.find(t=>t.charId===g)?{success:!1,message:S.MATERIAL_EXIST}:await e({charId:g,purposeId:N})}:void 0,onUpdate:d!=null&&d.Update?async(T,s)=>{const g=s[0],N=s[1];return await r({charId:R,purposeId:x},{charId:g,purposeId:N})}:void 0}):c("div",{})]})}const V=new Map;V.set(1,"\u041D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440\u0430");V.set(2,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438");V.set(3,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438 \u043D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440");V.set(4,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438 \u0444\u0430\u0441\u0430\u0434\u043E\u0432");V.set(5,"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A");V.set(6,"\u0414\u0421\u041F - \u041A\u0440\u043E\u043C\u043A\u0430 - \u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430");V.set(7,"\u0414\u0435\u0442\u0430\u043B\u0438\u0440\u043E\u0432\u043A\u0438");V.set(8,"\u0424\u0443\u0440\u043D\u0438\u0442\u0443\u0440\u0430");function he(){const p=Gt(),{permissions:e}=y(O),r=e.get(W.SPECIFICATION),[i,a]=h.exports.useState(1),l=[...V.entries()].map((A,I)=>c("div",{className:i===A[0]?"tab-button-active":"tab-button-inactive",onClick:()=>{a(A[0])},role:"button",children:A[1]},I)),d=pe(i);return h.exports.useEffect(()=>{r!=null&&r.Read||p("/")},[r]),M("div",{className:"database-edit-container",children:[c("div",{className:"tab-header-container",children:l}),d]})}function pe(p){const e=new Map;return e.set(1,c(Yt,{})),e.set(2,c(Jt,{})),e.set(3,c(Qt,{})),e.set(6,c(qt,{})),e.set(7,c(ae,{})),e.set(8,c(ce,{})),e.set(4,c(de,{})),e.set(5,c(le,{})),e.get(p)||c(zt,{})}export{he as default};

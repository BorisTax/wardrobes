import{c as e,u as g,a as r,a0 as o4,a1 as E4,R as n4,r as C,a2 as f4,j as v,a3 as b,C as V,a4 as $,P as O,e as a4,a5 as C4,a6 as x4,i as c4,a7 as j,a8 as F4,a9 as A4,aa as y4,ab as D4,ac as b4,ad as w4,ae as T4,af as I4,ag as W4,ah as B4,ai as H4,aj as R4,ak as Z,al as P4,am as N4,an as S4,ao as k4,ap as w,aq as l4,L as M4,K as V4,ar as $4,as as O4,at as L4,au as j4,av as _4,aw as G4,ax as U4,ay as z4,az as q4,aA as r4,aB as K4,aC as Y4,b as J4,Z as d4,aD as Z4,aE as h4,aF as Q4,aG as X4,aH as uu,N as t4,aI as eu,aJ as tu,aK as su}from"./index.39a8e483.js";import{P as m4,S as Q,a as iu}from"./SpecificationTable.695d7cf2.js";import{I as X,s as ou}from"./export.9f32fa04.js";function L(u){return e("div",{className:"property-row",children:u.children})}const s4=[2,3,4,5,6];function nu(){const u=g(a4),t=g(C4),s=g(x4),a=g(c4),{profile:d,fasadCount:h,type:n,wardHeight:c,wardWidth:p}=g(j),i=r(F4),o=r(A4),A=r(y4),E=r(D4),x=r(b4),T=o4(),y=E4(),I=r(w4),W=r(T4),k=r(I4),{next:H,previous:R}=g(W4),f=r(B4),F=r(H4),D=u.permissions.get(n4.COMBIFASADES),B=!(D!=null&&D.Create),_=!(D!=null&&D.Read),G=C.exports.useMemo(()=>[...t.keys()].filter(m=>m!==f4.GARDEROB),[t]),U=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u0448\u043A\u0430\u0444\u0430"),!1),z=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0432\u044B\u0441\u043E\u0442\u0435"),!1),q=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0448\u0438\u0440\u0438\u043D\u0435"),!1),K=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),!1),Y=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u043A\u043E\u043B-\u0432\u0435 \u0444\u0430\u0441\u0430\u0434\u043E\u0432"),!1);return v("div",{className:"properties-bar",children:[v("div",{className:"d-flex flex-nowrap justify-content-between",children:[e("div",{children:"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0448\u043A\u0430\u0444\u0430"}),v(X,{justifyContent:"flex-end",children:[e(b,{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",icon:"new",onClick:async()=>{await T("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435?")&&I()}}),e(b,{title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",icon:"open",disabled:_,onClick:()=>{k()}}),e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:"save",disabled:B,onClick:()=>{W()}}),e(b,{title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",icon:"undo",disabled:!R,onClick:()=>{f()}}),e(b,{title:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",icon:"redo",disabled:!H,onClick:()=>{F()}})]})]}),e("hr",{}),v(m4,{children:[e(V,{title:"\u0422\u0438\u043F:",value:n,items:G,displayValue:m=>t.get(m)||"",onChange:m=>{x([m,U])}}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),e(L,{children:e($,{name:"width",value:p,type:O.INTEGER_POSITIVE_NUMBER,min:900,max:4e3,setValue:m=>{A([+m,q])},submitOnLostFocus:!0})}),e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),e(L,{children:e($,{name:"height",value:c,type:O.INTEGER_POSITIVE_NUMBER,min:1800,max:2700,setValue:m=>{E([+m,z])},submitOnLostFocus:!0})}),e(Q,{title:"\u041A\u043E\u043B-\u0432\u043E \u0444\u0430\u0441\u0430\u0434\u043E\u0432:",value:h,items:s4,displayValue:m=>v("div",{children:["\xA0",m,"\xA0"]}),onChange:m=>{o([+m,Y])},columns:s4.length}),e(V,{title:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C:",value:d.id,items:[...s.keys()],displayValue:m=>{var P,N;return((N=a.get(((P=s.get(m))==null?void 0:P.charId)||0))==null?void 0:N.name)||""},onChange:m=>{i([m,K])}})]})]})}function i4({title:u,onClick:t,iconPressed:s,iconUnPressed:a,pressed:d,disabled:h=!1,visible:n=!0}){let c=h?"button-disabled":"button";c+=d?" button-down":" button-up";const{onMouseOver:p,onMouseLeave:i}=R4(u);return e("div",{style:{visibility:n?"visible":"hidden"},className:`${c} ${d?s:a} noselect`,onClick:o=>{h||(o.stopPropagation(),t())},onMouseOver:o=>{p(o,{disabled:h})},onMouseLeave:()=>{i()},onContextMenu:o=>{o.preventDefault()}})}const au=[1,2,3,4,5,6,7,8,9,10],M=new Map;function cu(){const{permissions:u}=g(a4),t=u.get(n4.TEMPLATE),s=g(l4).at(-1),a=s==null?void 0:s.parent,d=g(M4),h=g(V4),n=g(c4),{width:c,height:p,materialId:i,fasadType:o,direction:A,directions:E,sectionCount:x,fixHeight:T,fixWidth:y,disabledWidth:I,disabledHeight:W,disabledFixHeight:k,disabledFixWidth:H}=lu(s),R=C.exports.useMemo(()=>{const l=h.filter(S=>S.id===o);return(o===Z.DSP||o===Z.LACOBEL?l.toSorted((S,v4)=>{var u4,e4;return(((u4=n.get(S.charId))==null?void 0:u4.name)||"")>(((e4=n.get(v4.charId))==null?void 0:e4.name)||"")?1:-1}):l).map(S=>S.charId)},[h,o,n]),f=s?au:[],F=r($4),D=r(O4),B=r(L4),_=r(j4),G=r(_4),U=r(G4),z=r(U4),q=r(z4),K=r(q4),Y=r(r4),m=r(K4),P=P4(a),N=N4(a),g4=o4();return v("div",{className:"properties-bar",onClick:l=>{l.stopPropagation()},children:[v("div",{className:"property-bar-header",children:["\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0444\u0430\u0441\u0430\u0434\u0430",v(X,{justifyContent:"flex-end",children:[e(b,{title:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430",icon:"new",disabled:(s==null?void 0:s.level)===0&&!s.children.length,onClick:async()=>{await g4("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430?")&&F()}}),(t==null?void 0:t.Read)&&e(b,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437 \u0448\u0430\u0431\u043B\u043E\u043D\u0430",icon:"open",visible:s!==null,onClick:()=>{m(!1)}}),(t==null?void 0:t.Create)&&e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A \u0448\u0430\u0431\u043B\u043E\u043D",icon:"save",visible:s!==null,onClick:()=>{m(!0)}}),e(b,{title:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u0432\u0435\u0440\u0445",icon:"selectParent",onClick:()=>{Y(a)},disabled:s===null||(s==null?void 0:s.level)===0})]})]}),e("hr",{}),v(m4,{children:[e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),v(L,{children:[e($,{value:p,type:O.POSITIVE_NUMBER,min:1,setValue:l=>{D(+l)},disabled:W,width:"100px"}),e(i4,{pressed:T,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u044B\u0441\u043E\u0442\u0443",visible:!k,onClick:()=>{G(!T)}}),N>0&&!T&&e("span",{children:`${s==null?void 0:s.heightRatio}/${N}`})]}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),v(L,{children:[e($,{value:c,type:O.POSITIVE_NUMBER,min:1,setValue:l=>{B(+l)},disabled:I,width:"100px"}),e(i4,{pressed:y,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0448\u0438\u0440\u0438\u043D\u0443",visible:!H,onClick:()=>{_(!y)}}),P>0&&!y&&e("span",{children:`${s==null?void 0:s.widthRatio}/${P}`})]}),e(V,{title:"\u0422\u0438\u043F:",value:o,altValue:o===Z.COMBI?"\u041A\u041E\u041C\u0411\u0418":void 0,items:[...d.keys()],displayValue:l=>d.get(l),disabled:!s,onChange:l=>{U(l)},disableTyping:!0}),e(V,{title:"\u0426\u0432\u0435\u0442/\u0420\u0438\u0441\u0443\u043D\u043E\u043A:",value:i,altValue:i===0?"\u043A\u043E\u043C\u0431\u0438":void 0,items:R,displayValue:l=>{var J;return(J=n.get(l))==null?void 0:J.name},disabled:!s,onChange:l=>{z(l)},disableTyping:!0,styles:{minWidth:"50px"}}),e(Q,{title:"\u041D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F:",value:A,items:[...E.keys()],displayValue:l=>E.get(l),disabled:!s,onChange:l=>{q(l)}}),e(Q,{title:"\u041A\u043E\u043B-\u0432\u043E \u0441\u0435\u043A\u0446\u0438\u0439:",value:x,items:f,displayValue:l=>`${l}`,disabled:!s,onChange:l=>{K(l)},columns:5})]})]})}function lu(u){const t=(u==null?void 0:u.width)||0,s=(u==null?void 0:u.height)||0,a=u?S4(u):0,d=u?k4(u):0;M.clear(),u&&(M.set(w.WIDTH,"\u0412\u0435\u0440\u0442."),M.set(w.HEIGHT,"\u0413\u043E\u0440\u0438\u0437."));const h=u==null?void 0:u.division,n=u&&u.children.length>1?u.children.length:1,c=(u==null?void 0:u.fixedWidth)||!1,p=(u==null?void 0:u.fixedHeight)||!1,i=u==null?void 0:u.parent;let o=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.HEIGHT||u.fixedWidth,A=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.WIDTH||u.fixedHeight;const E=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.HEIGHT,x=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.WIDTH;return o=o||!!(u&&u.level<=1&&(i==null?void 0:i.division)===w.HEIGHT),A=A||!!(u&&u.level<=1&&(i==null?void 0:i.division)===w.WIDTH),{width:t,height:s,materialId:a,fasadType:d,direction:h,directions:M,sectionCount:n,fixHeight:p,fixWidth:c,disabledWidth:o,disabledHeight:A,disabledFixHeight:x,disabledFixWidth:E}}function ru(){return e("div",{className:"fixedHeight"})}function du(){return e("div",{className:"fixedWidth"})}function hu(){return e("div",{className:"fixedBoth"})}function p4(u){const t=u.fasad,s=Y4(t),a=t.children.length===0,h=u.activeFasades.includes(t),n=t.backImageProps;s||(n.top=0,n.left=0,n.size="");const{showFixIcons:c}=g(Z4),p=r(r4),i=J4(t.materialId),o=C.exports.useRef(null),A=C.exports.useRef(null);let E={gridTemplateRows:"1fr",gridTemplateColumns:"1fr"};if(!a){const f=t.division===w.HEIGHT,F=f?t.height:t.width,D=t.children.map(B=>`${(f?(B.height+1)/F:(B.width+1)/F).toFixed(3)}fr`).join(" ");E=f?{gridTemplateRows:D,gridTemplateColumns:"1fr"}:{gridTemplateRows:"1fr",gridTemplateColumns:D}}let x=t.level===0?{height:"100%"}:{};x={...x,boxShadow:h?"inset 0px 0px 10px red":""};let T={},y="";a?(x={...x,display:"flex",overflow:"hidden",flexShrink:"0",justifyContent:"center",alignItems:"center",objectFit:"cover",cursor:"pointer",border:"1px solid black",backgroundRepeat:"repeat"},T={onClick:f=>{f.stopPropagation(),p(t,f.shiftKey===!0)}},y="fasad-section"):x={...x,border:h?"1px solid red":"",backgroundColor:"white",backgroundImage:""};const I=t.children.length===0&&t.fixedHeight&&c,W=t.children.length===0&&t.fixedWidth&&c,H=I&&W?e(hu,{}):I?e(ru,{}):W?e(du,{}):e(d4,{}),R=t.children.length>1?t.children.map((f,F)=>e(p4,{fasad:f,activeFasades:u.activeFasades,rootFasad:u.rootFasad},F)):"";return C.exports.useEffect(()=>{const f=new Image,F=i;f.src=F,o.current&&(o.current.style.backgroundImage=F||getComputedStyle(o.current).getPropertyValue("--default-image")),o.current&&a&&F&&(o.current.style.backgroundImage=`url(${F})`)},[i,a]),v("div",{ref:a?o:A,className:y,style:{display:"grid",...E,gap:"1px",...x},...T,children:[R,H]})}function mu({index:u}){const{rootFasades:t}=g(j),s=g(h4),a=window.innerWidth,d=t[u],h=d.width/d.height,n=g(l4),c=C.exports.useRef(null),p=s===u?"fw-bold":"",i=o=>{c.current&&(c.current.style.width=c.current.offsetHeight*o+"px")};return C.exports.useLayoutEffect(()=>{i(h)},[h,a]),v("div",{className:"fasad-container",children:[e("div",{className:`text-center ${p}`,children:`${u+1}`}),e("div",{ref:c,className:"fasad-section-container",style:{height:"100%",width:"auto"},children:e(p4,{fasad:d,activeFasades:n,rootFasad:d})})]})}function pu(){const[,u]=C.exports.useState(0),[{rootFasades:t}]=Q4(j),s=t[0].width/t[0].height,a=C.exports.useRef(null),d=t.map((n,c)=>e(mu,{index:c},c)),h=window.innerWidth;return C.exports.useEffect(()=>{const n=()=>u(Math.random());return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),C.exports.useLayoutEffect(()=>{gu(s,t,a)},[h,s,t]),e("div",{ref:a,className:"rootfasades-container",children:d})}const gu=(u,t,s)=>{if(!s.current)return;const a=document.querySelector(".properties-container"),d=document.querySelector(".combifasades-container"),h=X4(),n=parseFloat(getComputedStyle(s.current).gap);if(h){const c=a.offsetHeight,p=d.offsetWidth-a.offsetWidth,i=c*u,o=Math.min(Math.floor(p/(i+n)),t.length),A=i*o;s.current.style.height=`${c}px`,s.current.style.width=`${A}px`}else{const c=Math.ceil(t.length/2),p=parseFloat(getComputedStyle(a).width),o=p/c/u;s.current.style.width=`${p}px`,s.current.style.height=`${o}px`}};function vu(u){return e("div",{className:"warning",children:u.text})}function Eu(){const u=r(ou),t=g(tu),{rootFasades:s,profile:a}=g(j),d=g(h4),h=r(su),[n,c]=C.exports.useState(0),p=t[n]||[],i=uu(s[d]),o=C.exports.useMemo(()=>t.map((A,E)=>e("div",{role:"button",className:E===n?"tab-button-active":"tab-button-inactive",onClick:()=>{h(E)},children:`\u0424\u0430\u0441\u0430\u0434 ${E+1}`},E)),[t,n]);return C.exports.useEffect(()=>{c(d)},[d]),v("div",{className:"ml-auto",children:[e(X,{justifyContent:"flex-end",children:e(b,{icon:"excel",title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",onClick:()=>u(p,`\u0424\u0430\u0441\u0430\u0434 (${n+1} \u0438\u0437 ${t.length})`)})}),v("div",{className:"ml-auto",children:[e("div",{className:"d-flex flex-row flex-nowrap justify-content-start align-items-center gap-1",children:o}),e("hr",{}),e(iu,{purposes:[t4.FASAD,t4.BOTH],specification:p}),i&&a.type===eu.BAVARIA&&e(vu,{text:"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435! \u0414\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430 \u043D\u0435 \u043F\u043E\u0434\u0445\u043E\u0434\u0438\u0442 \u0434\u043B\u044F \u043F\u0440\u043E\u0444\u0438\u043B\u044F \u0411\u0430\u0432\u0430\u0440\u0438\u044F!"})]})]})}function Fu(){return e(d4,{children:e("div",{className:"main-container",children:v("div",{className:"combifasades-container",children:[v("div",{className:"properties-container",children:[e(nu,{}),e(cu,{})]}),e(pu,{}),e(Eu,{})]})})})}export{Fu as default};

import{c as e,u as g,a as l,a0 as o4,a1 as E4,R as n4,r as C,a2 as x4,j as v,a3 as b,C as V,a4 as $,P as O,e as a4,a5 as C4,a6 as f4,i as c4,a7 as j,a8 as F4,a9 as A4,aa as y4,ab as D4,ac as b4,ad as w4,ae as T4,af as I4,ag as W4,ah as B4,ai as H4,aj as R4,ak as e4,al as P4,am as N4,an as w,ao as r4,L as S4,K as k4,ap as M4,aq as V4,ar as $4,as as O4,at as L4,au as j4,av as _4,aw as G4,ax as U4,ay as l4,az as z4,aA as q4,b as K4,Z as d4,aB as Y4,aC as h4,aD as Z4,aE as J4,aF as Q4,N as t4,aG as X4,aH as uu,aI as eu}from"./index.e8570816.js";import{I as Q,P as m4,S as J,s as tu,a as iu}from"./SpecificationTable.54f1ca99.js";function L(u){return e("div",{className:"property-row",children:u.children})}const i4=[2,3,4,5,6];function su(){const u=g(a4),t=g(C4),i=g(f4),a=g(c4),{profile:d,fasadCount:h,type:n,wardHeight:c,wardWidth:p}=g(j),s=l(F4),o=l(A4),A=l(y4),E=l(D4),f=l(b4),T=o4(),y=E4(),I=l(w4),W=l(T4),k=l(I4),{next:H,previous:R}=g(W4),x=l(B4),F=l(H4),D=u.permissions.get(n4.COMBIFASADES),B=!(D!=null&&D.Create),_=!(D!=null&&D.Read),G=C.exports.useMemo(()=>[...t.keys()].filter(m=>m!==x4.GARDEROB),[t]),U=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u0448\u043A\u0430\u0444\u0430"),!1),z=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0432\u044B\u0441\u043E\u0442\u0435"),!1),q=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0448\u0438\u0440\u0438\u043D\u0435"),!1),K=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),!1),Y=async()=>(await y("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u043A\u043E\u043B-\u0432\u0435 \u0444\u0430\u0441\u0430\u0434\u043E\u0432"),!1);return v("div",{className:"properties-bar",children:[v("div",{className:"d-flex flex-nowrap justify-content-between",children:[e("div",{children:"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0448\u043A\u0430\u0444\u0430"}),v(Q,{justifyContent:"flex-end",children:[e(b,{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",icon:"new",onClick:async()=>{await T("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435?")&&I()}}),e(b,{title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",icon:"open",disabled:_,onClick:()=>{k()}}),e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:"save",disabled:B,onClick:()=>{W()}}),e(b,{title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",icon:"undo",disabled:!R,onClick:()=>{x()}}),e(b,{title:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",icon:"redo",disabled:!H,onClick:()=>{F()}})]})]}),e("hr",{}),v(m4,{children:[e(V,{title:"\u0422\u0438\u043F:",value:n,items:G,displayValue:m=>t.get(m)||"",onChange:m=>{f([m,U])}}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),e(L,{children:e($,{name:"width",value:p,type:O.INTEGER_POSITIVE_NUMBER,min:900,max:4e3,setValue:m=>{A([+m,q])},submitOnLostFocus:!0})}),e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),e(L,{children:e($,{name:"height",value:c,type:O.INTEGER_POSITIVE_NUMBER,min:1800,max:2700,setValue:m=>{E([+m,z])},submitOnLostFocus:!0})}),e(J,{title:"\u041A\u043E\u043B-\u0432\u043E \u0444\u0430\u0441\u0430\u0434\u043E\u0432:",value:h,items:i4,displayValue:m=>v("div",{children:["\xA0",m,"\xA0"]}),onChange:m=>{o([+m,Y])},columns:i4.length}),e(V,{title:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C:",value:d.id,items:[...i.keys()],displayValue:m=>{var P,N;return((N=a.get(((P=i.get(m))==null?void 0:P.charId)||0))==null?void 0:N.name)||""},onChange:m=>{s([m,K])}})]})]})}function s4({title:u,onClick:t,iconPressed:i,iconUnPressed:a,pressed:d,disabled:h=!1,visible:n=!0}){let c=h?"button-disabled":"button";c+=d?" button-down":" button-up";const{onMouseOver:p,onMouseLeave:s}=R4(u);return e("div",{style:{visibility:n?"visible":"hidden"},className:`${c} ${d?i:a} noselect`,onClick:o=>{h||(o.stopPropagation(),t())},onMouseOver:o=>{p(o,{disabled:h})},onMouseLeave:()=>{s()},onContextMenu:o=>{o.preventDefault()}})}const ou=[1,2,3,4,5,6,7,8,9,10],M=new Map;function nu(){const{permissions:u}=g(a4),t=u.get(n4.TEMPLATE),i=g(r4).at(-1),a=i==null?void 0:i.parent,d=g(S4),h=g(k4),n=g(c4),{width:c,height:p,materialId:s,fasadType:o,direction:A,directions:E,sectionCount:f,fixHeight:T,fixWidth:y,disabledWidth:I,disabledHeight:W,disabledFixHeight:k,disabledFixWidth:H}=au(i),R=C.exports.useMemo(()=>{const r=h.filter(S=>S.id===o);return(o===e4.DSP||o===e4.LACOBEL?r.toSorted((S,v4)=>{var X,u4;return(((X=n.get(S.charId))==null?void 0:X.name)||"")>(((u4=n.get(v4.charId))==null?void 0:u4.name)||"")?1:-1}):r).map(S=>S.charId)},[h,o,n]),x=i?ou:[],F=l(M4),D=l(V4),B=l($4),_=l(O4),G=l(L4),U=l(j4),z=l(_4),q=l(G4),K=l(U4),Y=l(l4),m=l(z4),P=P4(a),N=N4(a),g4=o4();return v("div",{className:"properties-bar",onClick:r=>{r.stopPropagation()},children:[v("div",{className:"property-bar-header",children:["\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0444\u0430\u0441\u0430\u0434\u0430",v(Q,{justifyContent:"flex-end",children:[e(b,{title:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430",icon:"new",disabled:(i==null?void 0:i.level)===0&&!i.children.length,onClick:async()=>{await g4("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430?")&&F()}}),(t==null?void 0:t.Read)&&e(b,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437 \u0448\u0430\u0431\u043B\u043E\u043D\u0430",icon:"open",visible:i!==null,onClick:()=>{m(!1)}}),(t==null?void 0:t.Create)&&e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A \u0448\u0430\u0431\u043B\u043E\u043D",icon:"save",visible:i!==null,onClick:()=>{m(!0)}}),e(b,{title:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u0432\u0435\u0440\u0445",icon:"selectParent",onClick:()=>{Y(a)},disabled:i===null||(i==null?void 0:i.level)===0})]})]}),e("hr",{}),v(m4,{children:[e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),v(L,{children:[e($,{value:p,type:O.POSITIVE_NUMBER,min:1,setValue:r=>{D(+r)},disabled:W,width:"100px"}),e(s4,{pressed:T,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u044B\u0441\u043E\u0442\u0443",visible:!k,onClick:()=>{G(!T)}}),N>0&&!T&&e("span",{children:`${i==null?void 0:i.heightRatio}/${N}`})]}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),v(L,{children:[e($,{value:c,type:O.POSITIVE_NUMBER,min:1,setValue:r=>{B(+r)},disabled:I,width:"100px"}),e(s4,{pressed:y,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0448\u0438\u0440\u0438\u043D\u0443",visible:!H,onClick:()=>{_(!y)}}),P>0&&!y&&e("span",{children:`${i==null?void 0:i.widthRatio}/${P}`})]}),e(V,{title:"\u0422\u0438\u043F:",value:o,items:[...d.keys()],displayValue:r=>d.get(r),disabled:!i,onChange:r=>{U(r)}}),e(V,{title:"\u0426\u0432\u0435\u0442/\u0420\u0438\u0441\u0443\u043D\u043E\u043A:",value:s,items:R,displayValue:r=>{var Z;return(Z=n.get(r))==null?void 0:Z.name},disabled:!i,onChange:r=>{z(r)},styles:{minWidth:"250px"}}),e(J,{title:"\u041D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F:",value:A,items:[...E.keys()],displayValue:r=>E.get(r),disabled:!i,onChange:r=>{q(r)}}),e(J,{title:"\u041A\u043E\u043B-\u0432\u043E \u0441\u0435\u043A\u0446\u0438\u0439:",value:f,items:x,displayValue:r=>`${r}`,disabled:!i,onChange:r=>{K(r)},columns:5})]})]})}function au(u){const t=(u==null?void 0:u.width)||0,i=(u==null?void 0:u.height)||0,a=(u==null?void 0:u.materialId)||0,d=(u==null?void 0:u.fasadType)||0;M.clear(),u&&(M.set(w.WIDTH,"\u0412\u0435\u0440\u0442."),M.set(w.HEIGHT,"\u0413\u043E\u0440\u0438\u0437."));const h=u==null?void 0:u.division,n=u&&u.children.length>1?u.children.length:1,c=(u==null?void 0:u.fixedWidth)||!1,p=(u==null?void 0:u.fixedHeight)||!1,s=u==null?void 0:u.parent;let o=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.HEIGHT||u.fixedWidth,A=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.WIDTH||u.fixedHeight;const E=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.HEIGHT,f=!u||u.level===0||u.level===1&&(s==null?void 0:s.division)===w.WIDTH;return o=o||!!(u&&u.level<=1&&(s==null?void 0:s.division)===w.HEIGHT),A=A||!!(u&&u.level<=1&&(s==null?void 0:s.division)===w.WIDTH),{width:t,height:i,materialId:a,fasadType:d,direction:h,directions:M,sectionCount:n,fixHeight:p,fixWidth:c,disabledWidth:o,disabledHeight:A,disabledFixHeight:f,disabledFixWidth:E}}function cu(){return e("div",{className:"fixedHeight"})}function ru(){return e("div",{className:"fixedWidth"})}function lu(){return e("div",{className:"fixedBoth"})}function p4(u){const t=u.fasad,i=q4(t),a=t.children.length===0,h=u.activeFasades.includes(t),n=t.backImageProps;i||(n.top=0,n.left=0,n.size="");const{showFixIcons:c}=g(Y4),p=l(l4),s=K4(t.materialId),o=C.exports.useRef(null),A=C.exports.useRef(null);let E={gridTemplateRows:"1fr",gridTemplateColumns:"1fr"};if(!a){const x=t.division===w.HEIGHT,F=x?t.height:t.width,D=t.children.map(B=>`${(x?(B.height+1)/F:(B.width+1)/F).toFixed(3)}fr`).join(" ");E=x?{gridTemplateRows:D,gridTemplateColumns:"1fr"}:{gridTemplateRows:"1fr",gridTemplateColumns:D}}let f=t.level===0?{height:"100%"}:{};f={...f,boxShadow:h?"inset 0px 0px 10px red":""};let T={},y="";a?(f={...f,display:"flex",overflow:"hidden",flexShrink:"0",justifyContent:"center",alignItems:"center",objectFit:"cover",cursor:"pointer",border:"1px solid black",backgroundRepeat:"repeat"},T={onClick:x=>{x.stopPropagation(),p(t,x.shiftKey===!0)}},y="fasad-section"):f={...f,border:h?"1px solid red":"",backgroundColor:"white",backgroundImage:""};const I=t.children.length===0&&t.fixedHeight&&c,W=t.children.length===0&&t.fixedWidth&&c,H=I&&W?e(lu,{}):I?e(cu,{}):W?e(ru,{}):e(d4,{}),R=t.children.length>1?t.children.map((x,F)=>e(p4,{fasad:x,activeFasades:u.activeFasades,rootFasad:u.rootFasad},F)):"";return C.exports.useEffect(()=>{const x=new Image,F=s;x.src=F,o.current&&(o.current.style.backgroundImage=F||getComputedStyle(o.current).getPropertyValue("--default-image")),o.current&&a&&F&&(o.current.style.backgroundImage=`url(${F})`)},[s,a]),v("div",{ref:a?o:A,className:y,style:{display:"grid",...E,gap:"1px",...f},...T,children:[R,H]})}function du({index:u}){const{rootFasades:t}=g(j),i=g(h4),a=window.innerWidth,d=t[u],h=d.width/d.height,n=g(r4),c=C.exports.useRef(null),p=i===u?"fw-bold":"",s=o=>{c.current&&(c.current.style.width=c.current.offsetHeight*o+"px")};return C.exports.useLayoutEffect(()=>{s(h)},[h,a]),v("div",{className:"fasad-container",children:[e("div",{className:`text-center ${p}`,children:`${u+1}`}),e("div",{ref:c,className:"fasad-section-container",style:{height:"100%",width:"auto"},children:e(p4,{fasad:d,activeFasades:n,rootFasad:d})})]})}function hu(){const[,u]=C.exports.useState(0),[{rootFasades:t}]=Z4(j),i=t[0].width/t[0].height,a=C.exports.useRef(null),d=t.map((n,c)=>e(du,{index:c},c)),h=window.innerWidth;return C.exports.useEffect(()=>{const n=()=>u(Math.random());return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),C.exports.useLayoutEffect(()=>{mu(i,t,a)},[h,i,t]),e("div",{ref:a,className:"rootfasades-container",children:d})}const mu=(u,t,i)=>{if(!i.current)return;const a=document.querySelector(".properties-container"),d=document.querySelector(".combifasades-container"),h=J4(),n=parseFloat(getComputedStyle(i.current).gap);if(h){const c=a.offsetHeight,p=d.offsetWidth-a.offsetWidth,s=c*u,o=Math.min(Math.floor(p/(s+n)),t.length),A=s*o;i.current.style.height=`${c}px`,i.current.style.width=`${A}px`}else{const c=Math.ceil(t.length/2),p=parseFloat(getComputedStyle(a).width),o=p/c/u;i.current.style.width=`${p}px`,i.current.style.height=`${o}px`}};function pu(u){return e("div",{className:"warning",children:u.text})}function gu(){const u=l(tu),t=g(uu),{rootFasades:i,profile:a}=g(j),d=g(h4),h=l(eu),[n,c]=C.exports.useState(0),p=t[n]||[],s=Q4(i[d]),o=C.exports.useMemo(()=>t.map((A,E)=>e("div",{role:"button",className:E===n?"tab-button-active":"tab-button-inactive",onClick:()=>{h(E)},children:`\u0424\u0430\u0441\u0430\u0434 ${E+1}`},E)),[t,n]);return C.exports.useEffect(()=>{c(d)},[d]),v("div",{className:"ml-auto",children:[e(Q,{justifyContent:"flex-end",children:e(b,{icon:"excel",title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",onClick:()=>u(p,`\u0424\u0430\u0441\u0430\u0434 (${n+1} \u0438\u0437 ${t.length})`)})}),v("div",{className:"ml-auto",children:[e("div",{className:"d-flex flex-row flex-nowrap justify-content-start align-items-center gap-1",children:o}),e("hr",{}),e(iu,{purposes:[t4.FASAD,t4.BOTH],specification:p}),s&&a.type===X4.BAVARIA&&e(pu,{text:"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435! \u041F\u0440\u043E\u0444\u0438\u043B\u044C \u0411\u0430\u0432\u0430\u0440\u0438\u044F \u043D\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u0432 \u0441\u0442\u044B\u043A!"})]})]})}function xu(){return e(d4,{children:e("div",{className:"main-container",children:v("div",{className:"combifasades-container",children:[v("div",{className:"properties-container",children:[e(su,{}),e(nu,{})]}),e(hu,{}),e(gu,{})]})})})}export{xu as default};

import{c as a,j as i,Z as k,u as c,R as O,a as B,r as v,T as _,aL as z,aM as V,e as G,_ as U,aN as Z,s as q,i as H,aO as J,aP as K}from"./index.216ce845.js";function W(u){return!u.hidden&&a("div",{className:"table-grid",style:{...u.style},children:u.children})}function X(u={items:[],disabled:!1,title:"",size:1,displayValue:()=>""}){const n=u.items instanceof Map?[...u.items.values()]:u.items;let l=n.findIndex(s=>s===u.value);const d=n==null?void 0:n.map((s,o)=>a("div",{className:`selector-button ${l===o?"selector-button-active":"selector-button-inactive"}`,role:"button",onClick:()=>{u.onChange&&u.onChange(u.items[o],o)},children:u.displayValue(s)||""},o));return i(k,{children:[u.title?a("span",{className:"text-end",children:u.title}):a(k,{}),a("div",{style:{gridTemplateColumns:`repeat(${u.columns||n.length}, 1fr)`},className:"selector-button-container",onClick:s=>{s.stopPropagation()},children:d})]})}function Y(u){const{permissions:n}=c(G),l=c(U),d=c(Z),s=n.get(O.SPECIFICATION),o=c(q),r=c(H),F=B(J),P=B(K),R=v.exports.useMemo(()=>{const e=[];return u.specification.forEach(t=>{var A,E,D,N,S,x,I,w,y;const C=((A=o.get(t[0]))==null?void 0:A.code)||"",b=((E=o.get(t[0]))==null?void 0:E.name)||"",f=((S=r.get(((N=(D=t[1])==null?void 0:D.data)==null?void 0:N.charId)||0))==null?void 0:S.code)||"",g=((w=r.get(((I=(x=t[1])==null?void 0:x.data)==null?void 0:I.charId)||0))==null?void 0:w.name)||"",p=t[1].data.amount,M=l.get(((y=o.get(t[0]))==null?void 0:y.units)||0)||"";e.push({specId:t[0],specCode:C,specName:b,charCode:f,charName:g,amount:p,units:M,verbose:t[1].verbose})}),[...e]},[o,r,l,u.specification]),[h,T]=v.exports.useState(!1),[m,$]=v.exports.useState(!1),L=[{caption:"\u041A\u043E\u0434",sorted:!0},{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",sorted:!0,defaultSorted:!0},{caption:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430"},{caption:"\u041A\u043E\u043B-\u0432\u043E",sorted:!0},{caption:"\u0415\u0434"}],j=R.filter(e=>u.purposes.some(t=>e.amount!==0||h)).toSorted((e,t)=>e.specName>t.specName?1:-1).map((e,t)=>{const C=e.amount||0,b=(e==null?void 0:e.charCode)&&m?`(${e.charCode})`:"",f=`${e.charName} ${b}`,g=e.verbose?{className:"table-data-cell-verbose",role:"button",onClick:()=>{!(s!=null&&s.Read)||(P(e.verbose,e.specId),F())}}:{};return{key:t,data:[e.specCode,a("span",{...g,children:e.specName},t),f,Number(C.toFixed(3)),e.units]}});return i("div",{className:`d-flex ${u.legendToRight?"flex-row":"flex-column"}`,children:[i("div",{className:"specification-table",children:[a(_,{header:L,content:j,setRowStyle:e=>e[3]!==0?"tr-attention":"tr-noattention"}),d&&a(z,{})]}),i("div",{className:"p-3",children:[u.hint&&a("div",{className:"fw-bold text-danger",children:u.hint}),a("div",{children:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043D\u0430 \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043D\u043E\u043C\u0435\u043D\u043A\u043B\u0430\u0442\u0443\u0440\u044B, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u044C\u043D\u0443\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E"}),a(V,{checked:h,caption:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0441\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438",onChange:()=>{T(!h)}}),a(V,{checked:m,caption:"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C \u043A\u043E\u0434 \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438",onChange:()=>{$(!m)}})]})]})}export{W as P,X as S,Y as a};
